<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Dashboard Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
            position: relative;
        }

        body.light-theme {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #202124;
        }

        /* ANIMATED WAVES */
        .waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            z-index: 0;
            opacity: 0.3;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background-repeat: repeat-x;
            animation: wave 20s linear infinite;
        }

        .wave:nth-child(1) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,60 Q300,0 600,60 T1200,60 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.3'/%3E%3C/svg%3E");
            animation-duration: 25s;
        }

        .wave:nth-child(2) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.2'/%3E%3C/svg%3E");
            animation-duration: 20s;
            animation-direction: reverse;
        }

        .wave:nth-child(3) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,100 Q300,60 600,100 T1200,100 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.1'/%3E%3C/svg%3E");
            animation-duration: 30s;
        }

        @keyframes wave {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: #845ef7;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Arizona Result Styling */
        .arizona-result h3 {
            color: #FFD700;
            margin: 15px 0 10px;
            font-size: 1.1em;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            padding-bottom: 5px;
        }

        .arizona-result p {
            margin: 10px 0;
            line-height: 1.6;
        }

        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .theme-toggle {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .tabs {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: white;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
            border: none;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 80px 40px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 72px;
            font-weight: 700;
            letter-spacing: -2px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff 0%, rgba(255, 255, 255, 0.8) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h1::after {
            content: "v2.1";
            font-size: 20px;
            vertical-align: super;
            opacity: 0.5;
            -webkit-text-fill-color: white;
            margin-left: 10px;
        }

        .light-theme h1 {
            background: linear-gradient(135deg, #202124 0%, rgba(32, 33, 36, 0.8) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 20px;
            font-weight: 300;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .light-theme .stat-card {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .light-theme .stat-card:hover {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-value {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 12px;
            font-weight: 500;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .light-theme .section {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        h2 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 15px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            font-size: 11px;
            font-weight: 600;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        td {
            font-size: 14px;
        }

        tr {
            transition: all 0.3s;
            position: relative;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.01);
        }

        .light-theme tr:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .favorite-star {
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            display: inline-block;
        }

        .favorite-star:hover {
            transform: scale(1.3) rotate(72deg);
        }

        .favorite-star.active {
            color: #fbbf24;
            filter: drop-shadow(0 0 8px #fbbf24);
        }

        .status-online {
            color: #4ade80;
            font-weight: 600;
        }

        .status-offline {
            color: #f87171;
            font-weight: 600;
        }

        .status-running {
            color: #4ade80;
        }

        .status-stopped {
            color: #f87171;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::after {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .light-theme .btn {
            background: rgba(0, 0, 0, 0.1);
            color: #202124;
            border-color: rgba(0, 0, 0, 0.2);
        }

        .light-theme .btn:hover {
            background: rgba(0, 0, 0, 0.15);
        }

        .btn-danger {
            background: rgba(248, 113, 113, 0.3);
            border-color: rgba(248, 113, 113, 0.5);
        }

        .btn-danger:hover {
            background: rgba(248, 113, 113, 0.5);
        }

        .btn-success {
            background: rgba(74, 222, 128, 0.3);
            border-color: rgba(74, 222, 128, 0.5);
        }

        .btn-success:hover {
            background: rgba(74, 222, 128, 0.5);
        }

        .btn-warning {
            background: rgba(251, 191, 36, 0.3);
            border-color: rgba(251, 191, 36, 0.5);
        }

        .btn-warning:hover {
            background: rgba(251, 191, 36, 0.5);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
        }

        .light-theme input {
            background: rgba(255, 255, 255, 0.9);
            color: #202124;
            border-color: rgba(0, 0, 0, 0.2);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .light-theme input::placeholder {
            color: rgba(0, 0, 0, 0.5);
        }

        input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .light-theme input:focus {
            border-color: #667eea;
            background: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            padding: 35px;
            border-radius: 20px;
            max-width: 700px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }

        .light-theme .modal-content {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.1);
        }

        .modal-content pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            color: #fff;
            font-size: 13px;
        }

        .light-theme .modal-content pre {
            background: rgba(0, 0, 0, 0.05);
            color: #202124;
        }

        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
            background-size: 200% 100%;
            animation: skeleton 1.5s infinite;
            border-radius: 8px;
            height: 50px;
            margin-bottom: 12px;
        }

        .light-theme .skeleton {
            background: linear-gradient(90deg, rgba(0, 0, 0, 0.05) 25%, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.05) 75%);
            background-size: 200% 100%;
        }

        @keyframes skeleton {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        a {
            color: white;
            text-decoration: none;
            opacity: 0.9;
        }

        a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .light-theme a {
            color: #667eea;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            color: #202124;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 14px;
        }

        .toast.success {
            border-left: 4px solid #4ade80;
        }

        .toast.error {
            border-left: 4px solid #f87171;
        }

        .toast.info {
            border-left: 4px solid #60a5fa;
        }

        .toast.warning {
            border-left: 4px solid #fbbf24;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .light-theme .log-container {
            background: rgba(0, 0, 0, 0.05);
        }

        .log-entry {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #60a5fa;
            margin-right: 10px;
        }

        .log-level {
            font-weight: 600;
            margin-right: 10px;
        }

        .log-level.info {
            color: #4ade80;
        }

        .log-level.warning {
            color: #fbbf24;
        }

        .log-level.error {
            color: #f87171;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .leaderboard-rank {
            font-size: 24px;
            font-weight: 700;
            margin-right: 15px;
            min-width: 40px;
        }

        .leaderboard-rank.gold {
            color: #fbbf24;
        }

        .leaderboard-rank.silver {
            color: #d1d5db;
        }

        .leaderboard-rank.bronze {
            color: #f97316;
        }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .leaderboard-count {
            font-size: 12px;
            opacity: 0.7;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 6px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 1s ease-out;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 40px 20px;
            }

            h1 {
                font-size: 42px;
            }

            .subtitle {
                font-size: 16px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-value {
                font-size: 32px;
            }

            .section {
                padding: 20px;
            }

            h2 {
                font-size: 22px;
            }

            .input-group {
                flex-direction: column;
            }

            table {
                font-size: 12px;
            }

            th,
            td {
                padding: 10px 6px;
            }

            .theme-toggle {
                top: 20px;
                right: 20px;
            }

            .tabs {
                top: 80px;
                right: 20px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <canvas id="particleCanvas"></canvas>

    {% if user %}
    <div class="user-profile" onclick="switchTab('profile')"
        style="cursor: pointer; transition: all 0.3s; position: fixed; top: 30px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.3);"
        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
        onmouseout="this.style.background='rgba(255,255,255,0.2)'">
        <img src="{{ user.avatar }}" alt="avatar" style="width: 32px; height: 32px; border-radius: 50%;">
        <span style="font-weight: 600; font-size: 14px;">{{ user.username }}</span>
        <a href="/logout" title="–í—ã–π—Ç–∏" onclick="event.stopPropagation()"
            style="margin-left: 5px; opacity: 0.7; font-size: 18px; text-decoration: none;">üö™</a>
    </div>
    {% else %}
    <a href="{{ auth_url }}"
        style="position: fixed; top: 30px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; background: #5865F2; backdrop-filter: blur(10px); padding: 10px 20px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.3); text-decoration: none; color: white; font-weight: 600; font-size: 14px; transition: all 0.3s;"
        onmouseover="this.style.background='#4752c4'" onmouseout="this.style.background='#5865F2'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z" />
        </svg>
        –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord
    </a>
    {% endif %}

    <div class="theme-toggle" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
        <span id="theme-icon">üåô</span>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
        <button class="tab-btn" onclick="switchTab('control')">üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        <button class="tab-btn" onclick="switchTab('data')">üìã –î–∞–Ω–Ω—ã–µ</button>
        <button class="tab-btn" onclick="switchTab('favorites')">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button class="tab-btn" onclick="switchTab('tempmail')">üìß Temp Mail</button>
        <button class="tab-btn" onclick="switchTab('aichat')">ü§ñ AI Chat</button>
        <button class="tab-btn" onclick="switchTab('arizonaai')">üåµ Arizona AI</button>
    </div>

    <div class="modal" id="viewModal">
        <div class="modal-content">
            <h2>üìÑ –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</h2>
            <pre id="modal-content"></pre>
            <button class="btn" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- Monitor Logs Modal -->
    <div class="modal" id="monitorLogsModal">
        <div class="modal-content" style="max-width: 900px;">
            <h2 id="monitor-logs-title">üìä –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h2>

            <div class="stats-grid" style="margin-bottom: 20px;">
                <div class="stat-card">
                    <div class="stat-value" id="monitor-uptime">-</div>
                    <div class="stat-label">Uptime %</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-checks">-</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-ping">-</div>
                    <div class="stat-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π Ping</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-status">-</div>
                    <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px;">üìù –ò—Å—Ç–æ—Ä–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</h3>
            <div class="log-container" id="monitor-logs-content" style="max-height: 400px; overflow-y: auto;">
                <p style="opacity: 0.5;">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p>
            </div>

            <div class="btn-group" style="margin-top: 20px;">
                <button class="btn btn-warning" onclick="clearMonitorLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
                <button class="btn" onclick="closeMonitorLogsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Bot Dashboard Pro</h1>
            <p class="subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
        </header>

        <!-- DASHBOARD TAB -->
        <div id="tab-dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="bot-servers">-</div>
                    <div class="stat-label">–°–µ—Ä–≤–µ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="bot-users">-</div>
                    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="bot-commands">-</div>
                    <div class="stat-label">–ö–æ–º–∞–Ω–¥ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-accounts">-</div>
                    <div class="stat-label">–ó–∞–ø–∏—Å–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-monitors">-</div>
                    <div class="stat-label">–ú–æ–Ω–∏—Ç–æ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitors-online">-</div>
                    <div class="stat-label">–û–Ω–ª–∞–π–Ω</div>
                </div>
            </div>

            <div class="grid-2">
                <div class="section">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h2>
                    <div style="position: relative; height: 250px;">
                        <canvas id="monitorChart"></canvas>
                    </div>
                </div>

                <div class="section">
                    <h2>üèÜ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                    <div id="leaderboard-container"></div>
                </div>
            </div>

            <div class="section">
                <h2>üí¨ –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
                <div class="log-container" id="log-container">
                    <div class="log-entry">
                        <span class="log-time">--:--:--</span>
                        <span class="log-level info">[INFO]</span>
                        <span>–û–∂–∏–¥–∞–Ω–∏–µ –ª–æ–≥–æ–≤...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTROL TAB -->
        <div id="tab-control" class="tab-content">
            <div class="section">
                <h2>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º</h2>
                <div class="stats-grid" style="margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
                        <div class="stat-value" id="bot-status-text" style="font-size: 24px;">
                            <span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Uptime</div>
                        <div class="stat-value" id="bot-uptime" style="font-size: 24px;">0:00:00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">CPU</div>
                        <div class="stat-value" id="bot-cpu" style="font-size: 24px;">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">RAM</div>
                        <div class="stat-value" id="bot-memory" style="font-size: 24px;">0 MB</div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-success" onclick="controlBot('start')">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn-danger" onclick="controlBot('stop')">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn btn-warning" onclick="controlBot('restart')">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
                </div>
            </div>

            <div class="section">
                <h2>üì° –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2>
                <div class="input-group">
                    <input type="text" id="monitor-url" placeholder="URL —Å–∞–π—Ç–∞">
                    <input type="text" id="monitor-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    <button class="btn" onclick="addMonitor()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="monitors-loading">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>
                <table id="monitors-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>URL</th>
                            <th>Uptime %</th>
                            <th>Ping</th>
                            <th>–ü—Ä–æ–≤–µ—Ä–∫–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="monitors-body"></tbody>
                </table>
            </div>
        </div>

        <!-- DATA TAB -->
        <div id="tab-data" class="tab-content">
            <div class="section">
                <h2>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏</h2>
                <button class="btn btn-success" onclick="exportData()" style="margin-bottom: 20px;">üì•
                    –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <div id="accounts-loading">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>
                <table id="accounts-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>ID</th>
                            <th>–ü—Ä–µ–≤—å—é</th>
                            <th>–î–æ–±–∞–≤–∏–ª</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="accounts-body"></tbody>
            </div>
        </div>

        <!-- FAVORITES TAB -->
        <div id="tab-favorites" class="tab-content">
            <div class="section">
                <h2>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä—ã</h2>
                <table id="favorites-monitors-table">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>URL</th>
                            <th>–ü—Ä–æ–≤–µ—Ä–∫–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="favorites-monitors-body"></tbody>
                </table>
            </div>

            <div class="section">
                <h2>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏</h2>
                <table id="favorites-accounts-table">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>ID</th>
                            <th>–ü—Ä–µ–≤—å—é</th>
                            <th>–î–æ–±–∞–≤–∏–ª</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="favorites-accounts-body"></tbody>
                </table>
            </div>
        </div>

        <!-- TEMP MAIL TAB -->
        <div id="tab-tempmail" class="tab-content">
            <style>
                .mail-layout {
                    display: grid;
                    grid-template-columns: 280px 1fr;
                    gap: 20px;
                    height: calc(100vh - 200px);
                    min-height: 600px;
                }

                .mail-sidebar {
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 16px;
                    padding: 20px;
                    display: flex;
                    flex-direction: column;
                    border: 1px solid rgba(255, 255, 255, 0.05);
                }

                .account-item {
                    padding: 12px;
                    margin-bottom: 8px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.2s;
                    border: 1px solid transparent;
                    position: relative;
                }

                .account-item:hover {
                    background: rgba(255, 255, 255, 0.1);
                }

                .account-item.active {
                    background: rgba(74, 222, 128, 0.1);
                    border-color: #4ade80;
                }

                .account-email {
                    font-size: 13px;
                    font-weight: 500;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    color: #e2e8f0;
                }

                .account-badge {
                    background: #ef4444;
                    color: white;
                    border-radius: 10px;
                    padding: 2px 6px;
                    font-size: 10px;
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    display: none;
                }

                .mail-main {
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 16px;
                    display: flex;
                    flex-direction: column;
                    overflow: hidden;
                    border: 1px solid rgba(255, 255, 255, 0.05);
                    position: relative;
                }

                .mail-toolbar {
                    padding: 15px 20px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    background: rgba(0, 0, 0, 0.1);
                }

                .inbox-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }

                .mail-item {
                    padding: 15px 20px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                    cursor: pointer;
                    transition: background 0.2s;
                    display: block;
                }

                .mail-item:hover {
                    background: rgba(255, 255, 255, 0.05);
                }

                .code-banner {
                    background: rgba(16, 185, 129, 0.2);
                    border: 1px solid #10b981;
                    padding: 15px;
                    border-radius: 8px;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    animation: slideDown 0.3s ease-out;
                }

                .code-value {
                    font-size: 28px;
                    font-weight: 800;
                    letter-spacing: 3px;
                    font-family: monospace;
                    color: #4ade80;
                    text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
                }

                #history-modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    overflow-x: auto;
                    margin: 10px 0;
                    font-size: 13px;
                }
            </style>
            <!-- Temp Mail Content -->
            <div class="mail-layout">
                <div class="mail-sidebar">
                    <div class="mail-toolbar">
                        <h3 style="margin:0; font-size:16px;">üìß –Ø—â–∏–∫–∏</h3>
                        <button class="btn btn-sm btn-success" onclick="createTempMail()">+New</button>
                    </div>
                    <div id="tm-accounts-list" style="flex:1; overflow-y:auto; margin-top:10px;"></div>
                    <div id="tm-empty-state" style="padding:20px; text-align:center; opacity:0.5; display:none;">
                        –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —è—â–∏–∫–æ–≤
                    </div>
                    <div
                        style="margin-top:auto; padding-top:10px; border-top:1px solid rgba(255,255,255,0.1); display:flex; justify-content:space-between;">
                        <button class="btn btn-sm" onclick="toggleHistoryModal()">üìú –ò—Å—Ç–æ—Ä–∏—è</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteCurrentAccount()">üóëÔ∏è</button>
                    </div>
                </div>
                <!-- Main Mail Content -->
                <div class="mail-main" id="tm-content" style="display:none;">
                    <div class="mail-toolbar">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <span id="tm-active-email"
                                style="font-weight:600; font-family:monospace; font-size:16px;">loading...</span>
                            <button class="btn btn-sm" onclick="copyActiveEmail()">üìã</button>
                        </div>
                        <button class="btn btn-sm" id="tm-refresh-btn" onclick="checkCurrentMail()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    </div>
                    <div class="inbox-list" id="tm-inbox-list">
                        <!-- Mails go here -->
                    </div>
                </div>
            </div>

            <!-- Mail Reader Overlay -->
            <div id="tm-reader" class="modal" style="display:none; z-index:1100;">
                <div class="modal-content" style="max-width:800px;">
                    <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                        <h3 id="tm-read-subject" style="margin:0;">Subject</h3>
                        <button class="btn btn-sm" onclick="closeReader()">‚ùå</button>
                    </div>
                    <div
                        style="background:rgba(255,255,255,0.05); padding:10px; border-radius:8px; margin-bottom:15px; font-size:13px;">
                        <div>From: <strong id="tm-read-from">Sender</strong></div>
                        <div>Date: <span id="tm-read-date">Time</span></div>
                    </div>
                    <div id="tm-code-banner" class="code-banner" style="display:none;">
                        <span style="font-weight:600;">–ö–û–î:</span>
                        <span id="tm-code-value" class="code-value">12345</span>
                        <button class="btn btn-sm" onclick="copyCode()">üìã</button>
                    </div>
                    <div id="tm-read-body" class="mail-body"
                        style="background:white; color:black; padding:20px; border-radius:8px; min-height:200px; overflow-x:auto;">
                        <!-- Body -->
                    </div>
                </div>
            </div>
        </div> <!-- Closing tab-tempmail -->

        <!-- AI CHAT TAB -->
        <div id="tab-aichat" class="tab-content">
            <style>
                .ai-message-content code {
                    background: rgba(0, 0, 0, 0.3);
                    padding: 2px 6px;
                    border-radius: 4px;
                    font-size: 13px;
                }

                .ai-chat-input-container {
                    padding: 20px;
                    background: rgba(0, 0, 0, 0.3);
                    border-top: 1px solid rgba(255, 255, 255, 0.1);
                }

                .ai-quick-actions {
                    display: flex;
                    gap: 8px;
                    margin-bottom: 12px;
                    flex-wrap: wrap;
                }

                .ai-quick-btn {
                    padding: 6px 12px;
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 20px;
                    cursor: pointer;
                    font-size: 12px;
                    color: white;
                    transition: all 0.2s;
                    font-family: 'Inter', sans-serif;
                }

                .ai-quick-btn:hover {
                    background: rgba(255, 255, 255, 0.2);
                    transform: translateY(-1px);
                }

                .ai-input-row {
                    display: flex;
                    gap: 12px;
                }

                .ai-input-row textarea {
                    flex: 1;
                    padding: 14px 18px;
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 12px;
                    background: rgba(255, 255, 255, 0.1);
                    color: white;
                    font-size: 14px;
                    font-family: 'Inter', sans-serif;
                    resize: none;
                    min-height: 50px;
                    max-height: 150px;
                }

                .ai-input-row textarea:focus {
                    outline: none;
                    border-color: #667eea;
                    background: rgba(255, 255, 255, 0.15);
                }

                .ai-input-row textarea::placeholder {
                    color: rgba(255, 255, 255, 0.5);
                }

                .ai-send-btn {
                    padding: 14px 24px;
                    background: linear-gradient(135deg, #667eea, #764ba2);
                    border: none;
                    border-radius: 12px;
                    color: white;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.2s;
                    font-family: 'Inter', sans-serif;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }

                .ai-send-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
                }

                .ai-send-btn:disabled {
                    opacity: 0.5;
                    cursor: not-allowed;
                    transform: none;
                }

                .ai-typing {
                    display: flex;
                    gap: 4px;
                    padding: 8px 12px;
                }

                .ai-typing span {
                    width: 8px;
                    height: 8px;
                    background: #667eea;
                    border-radius: 50%;
                    animation: typing 1.4s infinite;
                }

                .ai-typing span:nth-child(2) {
                    animation-delay: 0.2s;
                }

                .ai-typing span:nth-child(3) {
                    animation-delay: 0.4s;
                }

                @keyframes typing {

                    0%,
                    100% {
                        transform: translateY(0);
                    }

                    50% {
                        transform: translateY(-5px);
                    }
                }

                .ai-welcome {
                    text-align: center;
                    padding: 60px 20px;
                    opacity: 0.7;
                }

                .ai-welcome-icon {
                    font-size: 64px;
                    margin-bottom: 20px;
                }

                .ai-welcome h3 {
                    margin-bottom: 10px;
                }
            </style>
            <div class="ai-chat-container">
                <div class="ai-chat-header">
                    <h2>ü§ñ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h2>
                    <div class="ai-status">
                        <div class="ai-status-dot"></div>
                        <span>Gemini 1.5 Flash</span>
                    </div>
                </div>

                <div class="ai-chat-messages" id="ai-messages">
                    <div class="ai-welcome">
                        <div class="ai-welcome-icon">ü§ñ</div>
                        <h3>–ü—Ä–∏–≤–µ—Ç! –Ø AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
                        <p>–ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å, –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç</p>
                    </div>
                </div>

                <div class="ai-chat-input-container">
                    <div class="ai-quick-actions">
                        <button class="ai-quick-btn" onclick="aiQuickAction('–ù–∞–ø–∏—à–∏ –∫–æ–¥ –Ω–∞ Python –¥–ª—è')">üíª –ö–æ–¥</button>
                        <button class="ai-quick-btn" onclick="aiQuickAction('–ü–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π:')">üåç
                            –ü–µ—Ä–µ–≤–æ–¥</button>
                        <button class="ai-quick-btn" onclick="aiQuickAction('–û–±—ä—è—Å–Ω–∏ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ —á—Ç–æ —Ç–∞–∫–æ–µ')">üìö
                            –û–±—ä—è—Å–Ω–∏</button>
                        <button class="ai-quick-btn" onclick="aiQuickAction('–ù–∞–ø–∏—à–∏ –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ:')">üìù
                            –†–µ–∑—é–º–µ</button>
                        <button class="ai-quick-btn" onclick="aiQuickAction('–ü—Ä–∏–¥—É–º–∞–π –∏–¥–µ–∏ –¥–ª—è')">üí° –ò–¥–µ–∏</button>
                        <button class="ai-quick-btn" onclick="clearAiChat()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                    </div>
                    <div class="ai-input-row">
                        <textarea id="ai-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." rows="1"
                            onkeydown="if(event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendAiMessage(); }"></textarea>
                        <button class="ai-send-btn" onclick="sendAiMessage()" id="ai-send-btn">
                            <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å</span>
                            <span>‚û§</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ARIZONA AI TAB -->
            <div id="tab-arizonaai" class="tab-content">
                <style>
                    .arizona-header {
                        text-align: center;
                        padding: 30px;
                        background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
                        border-radius: 20px;
                        margin-bottom: 30px;
                        border: 1px solid rgba(139, 92, 246, 0.3);
                    }

                    .arizona-header h2 {
                        font-size: 32px;
                        margin-bottom: 10px;
                        background: linear-gradient(135deg, #8b5cf6, #ec4899);
                        -webkit-background-clip: text;
                        background-clip: text;
                        -webkit-text-fill-color: transparent;
                    }

                    .arizona-tools {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                        gap: 20px;
                        margin-bottom: 30px;
                    }

                    .arizona-tool-card {
                        background: rgba(0, 0, 0, 0.3);
                        border-radius: 16px;
                        padding: 25px;
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        cursor: pointer;
                        transition: all 0.3s;
                    }

                    .arizona-tool-card:hover {
                        transform: translateY(-5px);
                        border-color: #8b5cf6;
                        box-shadow: 0 10px 30px rgba(139, 92, 246, 0.2);
                    }

                    .arizona-tool-card.active {
                        border-color: #8b5cf6;
                        background: rgba(139, 92, 246, 0.1);
                    }

                    .arizona-tool-icon {
                        font-size: 40px;
                        margin-bottom: 15px;
                    }

                    .arizona-tool-title {
                        font-size: 18px;
                        font-weight: 600;
                        margin-bottom: 8px;
                    }

                    .arizona-tool-desc {
                        font-size: 13px;
                        opacity: 0.7;
                        line-height: 1.5;
                    }

                    .arizona-workspace {
                        background: rgba(0, 0, 0, 0.2);
                        border-radius: 20px;
                        padding: 30px;
                        border: 1px solid rgba(255, 255, 255, 0.05);
                        min-height: 400px;
                    }

                    .arizona-workspace h3 {
                        margin-bottom: 20px;
                        display: flex;
                        align-items: center;
                        gap: 10px;
                    }

                    .arizona-input-group {
                        margin-bottom: 20px;
                    }

                    .arizona-input-group label {
                        display: block;
                        margin-bottom: 8px;
                        font-weight: 500;
                        font-size: 14px;
                    }

                    .arizona-input-group textarea,
                    .arizona-input-group input,
                    .arizona-input-group select {
                        width: 100%;
                        padding: 14px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        border-radius: 12px;
                        background: rgba(255, 255, 255, 0.1);
                        color: white;
                        font-size: 14px;
                        font-family: 'Inter', sans-serif;
                    }

                    .arizona-input-group textarea {
                        min-height: 120px;
                        resize: vertical;
                    }

                    .arizona-result {
                        background: rgba(139, 92, 246, 0.1);
                        border: 1px solid rgba(139, 92, 246, 0.3);
                        border-radius: 12px;
                        padding: 20px;
                        margin-top: 20px;
                        white-space: pre-wrap;
                        line-height: 1.6;
                    }

                    .arizona-calc-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                        gap: 15px;
                    }

                    .calc-result-box {
                        background: rgba(74, 222, 128, 0.1);
                        border: 1px solid rgba(74, 222, 128, 0.3);
                        border-radius: 12px;
                        padding: 20px;
                        text-align: center;
                    }

                    .calc-result-value {
                        font-size: 28px;
                        font-weight: 700;
                        color: #4ade80;
                    }

                    .calc-result-label {
                        font-size: 12px;
                        opacity: 0.7;
                        margin-top: 5px;
                    }
                </style>

                <div class="arizona-header">
                    <h2>üåµ Arizona AI</h2>
                    <p style="opacity: 0.8;">–£–º–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∏–≥—Ä–æ–∫–æ–≤ Arizona RP</p>
                </div>

                <div class="arizona-tools">
                    <div class="arizona-tool-card active" onclick="selectArizonaTool('helper', this)">
                        <div class="arizona-tool-icon">üéÆ</div>
                        <div class="arizona-tool-title">–ü–æ–º–æ—â–Ω–∏–∫ –ø–æ –∏–≥—Ä–µ</div>
                        <div class="arizona-tool-desc">–û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Å–µ—Ä–≤–µ—Ä—É, —Å–∏—Å—Ç–µ–º–∞–º, –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤</div>
                    </div>

                    <div class="arizona-tool-card" onclick="selectArizonaTool('complaint', this)">
                        <div class="arizona-tool-icon">üìú</div>
                        <div class="arizona-tool-title">–ü–æ–º–æ—â—å —Å –∂–∞–ª–æ–±–∞–º–∏</div>
                        <div class="arizona-tool-desc">–°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∂–∞–ª–æ–±, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π –ø—Ä–∞–≤–∏–ª</div>
                    </div>

                    <div class="arizona-tool-card" onclick="selectArizonaTool('legend', this)">
                        <div class="arizona-tool-icon">üë§</div>
                        <div class="arizona-tool-title">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä RP-–ª–µ–≥–µ–Ω–¥—ã</div>
                        <div class="arizona-tool-desc">–°–æ–∑–¥–∞–Ω–∏–µ –±–∏–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</div>
                    </div>

                    <div class="arizona-tool-card" onclick="selectArizonaTool('rules', this)">
                        <div class="arizona-tool-icon">üìã</div>
                        <div class="arizona-tool-title">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª</div>
                        <div class="arizona-tool-desc">–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –ø—Ä–æ –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞</div>
                    </div>

                    <div class="arizona-tool-card" onclick="selectArizonaTool('calc', this)">
                        <div class="arizona-tool-icon">üí∞</div>
                        <div class="arizona-tool-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</div>
                        <div class="arizona-tool-desc">–†–∞—Å—á—ë—Ç –±–∏–∑–Ω–µ—Å–æ–≤, –∑–∞—Ä–ø–ª–∞—Ç, —Å—Ç–æ–∏–º–æ—Å—Ç–∏</div>
                    </div>
                </div>

                <!-- Helper Tool -->
                <div class="arizona-workspace" id="arizona-tool-helper">
                    <h3>üéÆ –ü–æ–º–æ—â–Ω–∏–∫ –ø–æ Arizona RP</h3>
                    <div class="arizona-input-group">
                        <label>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ø–æ –∏–≥—Ä–µ:</label>
                        <textarea id="arizona-helper-input"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞–∫ —Å—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–º —Ñ—Ä–∞–∫—Ü–∏–∏? –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –±–∏–∑–Ω–µ—Å? –ö–∞–∫ —É—Å—Ç—Ä–æ–∏—Ç—å—Å—è –≤ –ø–æ–ª–∏—Ü–∏—é?"></textarea>
                    </div>
                    <button class="btn btn-success" onclick="askArizonaHelper()">üöÄ –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                    <div class="arizona-result" id="arizona-helper-result" style="display: none;"></div>
                </div>

                <!-- Complaint Tool -->
                <div class="arizona-workspace" id="arizona-tool-complaint" style="display: none;">
                    <h3>üìú –ü–æ–º–æ—â—å —Å –∂–∞–ª–æ–±–∞–º–∏</h3>
                    <div class="arizona-input-group">
                        <label>–ù–∏–∫–Ω–µ–π–º –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è:</label>
                        <input type="text" id="arizona-complaint-nick" placeholder="Ivan_Petrov">
                    </div>
                    <div class="arizona-input-group">
                        <label>–û–ø–∏—à–∏—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é:</label>
                        <textarea id="arizona-complaint-desc"
                            placeholder="–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ? –ì–¥–µ? –ö–æ–≥–¥–∞? –ö–∞–∫–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –µ—Å—Ç—å?"></textarea>
                    </div>
                    <button class="btn btn-success" onclick="generateComplaint()">üìù –°–æ—Å—Ç–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É</button>
                    <div class="arizona-result" id="arizona-complaint-result" style="display: none;"></div>
                </div>

                <!-- Legend Generator Tool -->
                <div class="arizona-workspace" id="arizona-tool-legend" style="display: none;">
                    <h3>üë§ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä RP-–ª–µ–≥–µ–Ω–¥—ã</h3>
                    <div class="arizona-input-group">
                        <label>–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:</label>
                        <input type="text" id="arizona-legend-name" placeholder="Ivan_Petrov">
                    </div>
                    <div class="arizona-input-group">
                        <label>–í–æ–∑—Ä–∞—Å—Ç:</label>
                        <input type="number" id="arizona-legend-age" placeholder="25" min="18" max="80">
                    </div>
                    <div class="arizona-input-group">
                        <label>–°—Ç–∏–ª—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:</label>
                        <select id="arizona-legend-style">
                            <option value="criminal">üî´ –ö—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–π</option>
                            <option value="cop">üëÆ –ü–æ–ª–∏—Ü–µ–π—Å–∫–∏–π/–ì–æ—Å—Å–ª—É–∂–∞—â–∏–π</option>
                            <option value="business">üíº –ë–∏–∑–Ω–µ—Å–º–µ–Ω</option>
                            <option value="street">üèçÔ∏è –£–ª–∏—á–Ω—ã–π –≥–æ–Ω—â–∏–∫</option>
                            <option value="neutral">üßë –û–±—ã—á–Ω—ã–π –≥—Ä–∞–∂–¥–∞–Ω–∏–Ω</option>
                        </select>
                    </div>
                    <button class="btn btn-success" onclick="generateLegend()">‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–µ–≥–µ–Ω–¥—É</button>
                    <div class="arizona-result" id="arizona-legend-result" style="display: none;"></div>
                </div>

                <!-- Rules Tool -->
                <div class="arizona-workspace" id="arizona-tool-rules" style="display: none;">
                    <h3>üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–∏–ª</h3>
                    <div class="arizona-input-group">
                        <label>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ –ø—Ä–∞–≤–∏–ª–∞:</label>
                        <textarea id="arizona-rules-input"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ–∂–Ω–æ –ª–∏ —É–±–∏–≤–∞—Ç—å –≤ –∑–µ–ª—ë–Ω–æ–π –∑–æ–Ω–µ? –ß—Ç–æ —Ç–∞–∫–æ–µ DM? –ö–∞–∫–æ–π —Å—Ä–æ–∫ –±–∞–Ω–∞ –∑–∞ —á–∏—Ç—ã?"></textarea>
                    </div>
                    <button class="btn btn-success" onclick="checkRules()">‚öñÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞</button>
                    <div class="arizona-result" id="arizona-rules-result" style="display: none;"></div>
                </div>

                <!-- Calculator Tool -->
                <div class="arizona-workspace" id="arizona-tool-calc" style="display: none;">
                    <h3>üí∞ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã Arizona RP</h3>

                    <div style="margin-bottom: 30px;">
                        <h4 style="margin-bottom: 15px;">üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–∏–∑–Ω–µ—Å–∞</h4>
                        <div class="arizona-calc-grid">
                            <div class="arizona-input-group">
                                <label>–¢–∏–ø –±–∏–∑–Ω–µ—Å–∞:</label>
                                <select id="calc-business-type" onchange="calculateBusiness()">
                                    <option value="24/7">24/7 –ú–∞–≥–∞–∑–∏–Ω</option>
                                    <option value="clothes">–ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã</option>
                                    <option value="gas">–ó–∞–ø—Ä–∞–≤–∫–∞</option>
                                    <option value="automarket">–ê–≤—Ç–æ—Å–∞–ª–æ–Ω</option>
                                    <option value="club">–ö–ª—É–±</option>
                                </select>
                            </div>
                            <div class="arizona-input-group">
                                <label>–£—Ä–æ–≤–µ–Ω—å –±–∏–∑–Ω–µ—Å–∞:</label>
                                <input type="number" id="calc-business-level" value="1" min="1" max="30"
                                    onchange="calculateBusiness()">
                            </div>
                        </div>
                        <div class="arizona-calc-grid" style="margin-top: 15px;">
                            <div class="calc-result-box">
                                <div class="calc-result-value" id="calc-biz-income">$0</div>
                                <div class="calc-result-label">–î–æ—Ö–æ–¥ –≤ —á–∞—Å</div>
                            </div>
                            <div class="calc-result-box">
                                <div class="calc-result-value" id="calc-biz-daily">$0</div>
                                <div class="calc-result-label">–î–æ—Ö–æ–¥ –≤ –¥–µ–Ω—å</div>
                            </div>
                            <div class="calc-result-box">
                                <div class="calc-result-value" id="calc-biz-upgrade">$0</div>
                                <div class="calc-result-label">–¶–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è</div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 style="margin-bottom: 15px;">üëî –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞—Ä–ø–ª–∞—Ç—ã —Ñ—Ä–∞–∫—Ü–∏–π</h4>
                        <div class="arizona-calc-grid">
                            <div class="arizona-input-group">
                                <label>–§—Ä–∞–∫—Ü–∏—è:</label>
                                <select id="calc-faction" onchange="calculateFaction()">
                                    <option value="pd">üëÆ LSPD / SFPD / LVPD</option>
                                    <option value="fbi">üïµÔ∏è FBI</option>
                                    <option value="army">ü™ñ –ê—Ä–º–∏—è</option>
                                    <option value="ems">üöë –ë–æ–ª—å–Ω–∏—Ü–∞</option>
                                    <option value="gov">üèõÔ∏è –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ</option>
                                </select>
                            </div>
                            <div class="arizona-input-group">
                                <label>–†–∞–Ω–≥ (1-10):</label>
                                <input type="number" id="calc-faction-rank" value="1" min="1" max="10"
                                    onchange="calculateFaction()">
                            </div>
                        </div>
                        <div class="arizona-calc-grid" style="margin-top: 15px;">
                            <div class="calc-result-box">
                                <div class="calc-result-value" id="calc-faction-salary">$0</div>
                                <div class="calc-result-label">–ó–∞—Ä–ø–ª–∞—Ç–∞</div>
                            </div>
                            <div class="calc-result-box">
                                <div class="calc-result-value" id="calc-faction-paycheck">$0</div>
                                <div class="calc-result-label">–ü–µ–π–¥–µ–π (–∫–∞–∂–¥—ã–µ 30 –º–∏–Ω)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PROFILE TAB -->
            <div id="tab-profile" class="tab-content">
                {% if user %}
                <div
                    style="background: rgba(0,0,0,0.2); border-radius: 20px; padding: 40px; text-align: center; margin-bottom: 30px; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden;">
                    <div
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100px; background: linear-gradient(90deg, #5865F2, #eb459e); opacity: 0.2;">
                    </div>
                    <div style="position: relative; z-index: 1;">
                        <img src="{{ user.avatar }}"
                            style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid #1a1b1e; margin-bottom: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                        <h1 style="font-size: 32px; margin-bottom: 5px;">{{ user.username }}</h1>
                        <div style="opacity: 0.5; font-family: monospace; margin-bottom: 15px;">ID: {{ user.id }}</div>
                        {% if user.is_founder %}
                        <span
                            style="background: linear-gradient(135deg, #FFD700, #FFA500); color: black; padding: 6px 16px; border-radius: 20px; font-weight: 800; font-size: 14px; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4); text-transform: uppercase;">
                            üëë –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å
                        </span>
                        {% else %}
                        <span
                            style="background: #5865F2; padding: 6px 16px; border-radius: 20px; font-weight: 600; font-size: 14px; box-shadow: 0 4px 15px rgba(88, 101, 242, 0.4);">
                            üõ°Ô∏è Administrator
                        </span>
                        {% endif %}
                    </div>
                </div>

                <div class="grid-2">
                    <div class="section">
                        <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <div>
                                    <div style="font-weight: 600;">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                                    <div style="font-size: 12px; opacity: 0.6;">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –±–æ—Ç–∞
                                    </div>
                                </div>
                                <input type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                                <div>
                                    <div style="font-weight: 600;">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
                                    <div style="font-size: 12px; opacity: 0.6;">–ó–≤—É–∫ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –ª–æ–≥–∞—Ö</div>
                                </div>
                                <input type="checkbox" style="width: 20px; height: 20px;">
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                                <div>
                                    <div style="font-weight: 600;">Developer Mode</div>
                                    <div style="font-size: 12px; opacity: 0.6;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ID –æ–±—ä–µ–∫—Ç–æ–≤</div>
                                </div>
                                <input type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <a href="/logout" class="btn btn-danger"
                                style="width: 100%; display: block; text-align: center; text-decoration: none;">–í—ã–π—Ç–∏ –∏–∑
                                –∞–∫–∫–∞—É–Ω—Ç–∞</a>
                        </div>
                    </div>

                    <div class="section">
                        <h2>üìú –í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
                        <div id="user-personal-log"
                            style="max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 13px;">
                            <div style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); opacity: 0.7;">
                                <span style="color: #4ade80;">[AUTH]</span> –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω
                            </div>
                        </div>
                    </div>

                    {% if user.is_founder %}
                    <div class="section"
                        style="border: 1px solid rgba(255, 215, 0, 0.3); background: rgba(255, 215, 0, 0.05);">
                        <h2 style="color: #FFD700;">üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                        <div class="input-group">
                            <input type="text" id="gm-user-id" placeholder="ID">
                            <input type="text" id="gm-prefix" placeholder="Prefix">
                            <button class="btn btn-warning" onclick="godSetPrefix()">Set</button>
                        </div>
                        <div id="gm-prefixes-list"
                            style="margin-top: 10px; font-family: monospace; font-size: 12px; opacity: 0.8;"></div>
                    </div>
                    {% endif %}
                </div>
                {% else %}
                <div style="text-align: center; padding: 60px 20px;">
                    <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                    <h2 style="margin-bottom: 10px;">–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
                    <p style="opacity: 0.7; margin-bottom: 30px;">–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</p>
                    <a href="/" class="btn" style="text-decoration: none; display: inline-block;">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞
                        –≥–ª–∞–≤–Ω—É—é</a>
                </div>
                {% endif %}
            </div>

            <!-- HISTORY MODAL -->
            <div id="history-modal" onclick="if(event.target === this) toggleHistoryModal()">
                <div
                    style="background: #1e293b; padding: 30px; border-radius: 16px; width: 500px; max-width: 90%; max-height: 80vh; display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0;">üìú –ò—Å—Ç–æ—Ä–∏—è –∞–¥—Ä–µ—Å–æ–≤</h2>
                        <button class="btn-icon" onclick="toggleHistoryModal()">‚ùå</button>
                    </div>
                    <div id="history-list" style="overflow-y: auto; flex: 1; margin: 0 -10px; padding: 0 10px;"></div>
                    <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
                        <button class="btn btn-sm btn-danger" onclick="clearHistory()">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            const socket = io();

            socket.on('connect', () => {
                console.log('Connected to WebSocket');
                showToast('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É', 'success');
            });

            socket.on('stats_update', (data) => {
                // Update stats logic
                document.getElementById('bot-servers').textContent = data.servers;
                document.getElementById('bot-users').textContent = data.users;
                document.getElementById('bot-commands').textContent = data.commands_today;

                const hours = Math.floor(data.uptime / 3600);
                const minutes = Math.floor((data.uptime % 3600) / 60);
                const seconds = data.uptime % 60;
                document.getElementById('bot-uptime').textContent = `${hours}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                document.getElementById('bot-memory').textContent = data.memory_used + ' MB';
                document.getElementById('bot-cpu').textContent = data.cpu_percent.toFixed(1) + '%';

                const statusEl = document.getElementById('bot-status-text');
                if (data.running) {
                    statusEl.innerHTML = '<span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>';
                } else {
                    statusEl.innerHTML = '<span class="status-stopped">‚óè –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>';
                }
            });

            socket.on('log_new', (log) => addLogEntry(log));

            function addLogEntry(log) {
                const container = document.getElementById('log-container');
                const entry = document.createElement('div');
                entry.className = 'log-entry';
                entry.innerHTML = `
                <span class="log-time">${log.timestamp}</span>
                <span class="log-level ${log.level}">[${log.level.toUpperCase()}]</span>
                <span>${log.message}</span>
            `;
                container.insertBefore(entry, container.firstChild);

                while (container.children.length > 50) {
                    container.removeChild(container.lastChild);
                }
            }

            // --- TABS & NAVIGATION ---
            // --- TABS & NAVIGATION ---
            function switchTab(tab) {
                console.log('Switching to tab:', tab);
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

                // Activate button - Find button with specific onclick handler
                const btns = document.querySelectorAll('.tab-btn');
                btns.forEach(btn => {
                    if (btn.getAttribute('onclick').includes(`'${tab}'`)) {
                        btn.classList.add('active');
                    }
                });

                // Activate content
                const content = document.getElementById(`tab-${tab}`);
                if (content) {
                    content.classList.add('active');
                } else {
                    console.error('Tab content not found:', `tab-${tab}`);
                }

                // Load tab specific data
                if (tab === 'favorites') { loadFavoriteMonitors(); loadFavoriteAccounts(); }
                else if (tab === 'arizonaai') { if (typeof loadArizonaServers === 'function') loadArizonaServers(); }
                else if (tab === 'tempmail') {
                    if (typeof renderAccountsList === 'function') renderAccountsList();
                    if (typeof tm_accounts !== 'undefined' && tm_accounts.length > 0) checkCurrentMail(true);
                } else if (tab === 'profile') {
                    if (typeof loadGodPrefixes === 'function') loadGodPrefixes();
                } else if (tab === 'aichat') {
                    setTimeout(() => {
                        const msgs = document.getElementById('ai-messages');
                        if (msgs) msgs.scrollTop = msgs.scrollHeight;
                    }, 100);
                }
            }

            // --- FAVORITES SYSTEM ---
            let favorites = JSON.parse(localStorage.getItem('favorites') || '{"monitors": [], "accounts": []}');

            function toggleFavorite(type, id) {
                const list = favorites[type];
                const index = list.indexOf(id);
                if (index > -1) {
                    list.splice(index, 1);
                    showToast('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');
                } else {
                    list.push(id);
                    showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ', 'success');
                }
                localStorage.setItem('favorites', JSON.stringify(favorites));

                if (type === 'monitors') { loadMonitors(); loadFavoriteMonitors(); }
                else { loadAccounts(); loadFavoriteAccounts(); }
            }

            function isFavorite(type, id) { return favorites[type].includes(id); }

            function loadFavoriteMonitors() {
                fetch('/api/monitors').then(r => r.json()).then(monitors => {
                    const tbody = document.getElementById('favorites-monitors-body');
                    tbody.innerHTML = '';
                    const favs = monitors.filter(m => isFavorite('monitors', m.id));
                    if (favs.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:20px;opacity:0.5;">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</td></tr>';
                        return;
                    }
                    favs.forEach(m => {
                        tbody.innerHTML += `<tr><td>‚≠ê</td><td>${m.status}</td><td>${m.name}</td><td>${m.url}</td><td>-</td><td><button class="btn btn-sm btn-danger" onclick="removeMonitor('${m.id}')">X</button></td></tr>`;
                    });
                });
            }

            function loadFavoriteAccounts() {
                fetch('/api/accounts').then(r => r.json()).then(accs => {
                    const tbody = document.getElementById('favorites-accounts-body');
                    tbody.innerHTML = '';
                    const favs = accs.filter(a => isFavorite('accounts', a.id));
                    if (favs.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:20px;opacity:0.5;">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</td></tr>';
                        return;
                    }
                    favs.forEach(a => {
                        tbody.innerHTML += `<tr><td>‚≠ê</td><td>${a.id}</td><td>${a.preview}</td><td>${a.added_by}</td><td>${a.timestamp}</td><td><button class="btn btn-sm" onclick="viewAccount(${a.id})">üîç</button></td></tr>`;
                    });
                });
            }

            // --- TEMP MAIL LOGIC ---
            let tm_accounts = JSON.parse(localStorage.getItem('tm_accounts') || '[]');
            let tm_history = JSON.parse(localStorage.getItem('tm_history') || '[]');
            let tm_active_idx = parseInt(localStorage.getItem('tm_active_idx') || '0');
            if (tm_active_idx >= tm_accounts.length) tm_active_idx = 0;

            function saveTempMailState() {
                localStorage.setItem('tm_accounts', JSON.stringify(tm_accounts));
                localStorage.setItem('tm_history', JSON.stringify(tm_history));
                localStorage.setItem('tm_active_idx', tm_active_idx);
                renderAccountsList();
            }

            async function createTempMail() {
                showToast('–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—á—Ç—ã...', 'info');
                try {
                    const res = await fetch('/api/tempmail/create?count=1');
                    const data = await res.json();
                    if (data.error) throw new Error(data.error);

                    const newAcc = { ...data[0], created_at: Date.now() };
                    tm_accounts.unshift(newAcc);
                    tm_active_idx = 0;

                    // Add to history
                    if (!tm_history.some(h => h.email === newAcc.email)) {
                        tm_history.unshift({ email: newAcc.email, date: new Date().toLocaleTimeString() });
                        if (tm_history.length > 50) tm_history.pop();
                    }

                    saveTempMailState();
                    showToast('–ü–æ—á—Ç–∞ –≥–æ—Ç–æ–≤–∞!', 'success');
                    checkCurrentMail();
                } catch (e) {
                    console.error(e);
                    showToast('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ' + e.message, 'error');
                }
            }

            function renderAccountsList() {
                const list = document.getElementById('tm-accounts-list');
                list.innerHTML = '';

                if (tm_accounts.length === 0) {
                    list.innerHTML = '<div style="text-align:center;opacity:0.5;padding:20px;">–ù–µ—Ç —è—â–∏–∫–æ–≤</div>';
                    document.getElementById('tm-empty-state').style.display = 'flex';
                    document.getElementById('tm-content').style.display = 'none';
                    return;
                }

                document.getElementById('tm-empty-state').style.display = 'none';
                document.getElementById('tm-content').style.display = 'flex';

                tm_accounts.forEach((acc, idx) => {
                    const isActive = idx === tm_active_idx;
                    const el = document.createElement('div');
                    el.className = `account-item ${isActive ? 'active' : ''}`;
                    el.onclick = () => { tm_active_idx = idx; saveTempMailState(); checkCurrentMail(); };
                    el.innerHTML = `<div class="account-email">${acc.email}</div>`;
                    list.appendChild(el);
                });

                if (tm_accounts[tm_active_idx]) {
                    document.getElementById('tm-active-email').innerText = tm_accounts[tm_active_idx].email;
                }
            }

            async function checkCurrentMail(silent = false) {
                if (tm_accounts.length === 0) return;
                const acc = tm_accounts[tm_active_idx];

                if (!silent) document.getElementById('tm-refresh-btn').innerHTML = '‚åõ';

                try {
                    const res = await fetch(`/api/tempmail/check?token=${acc.token}&ts=${Date.now()}`);
                    const msgs = await res.json();

                    if (!silent) document.getElementById('tm-refresh-btn').innerHTML = 'üîÑ –û–±–Ω–æ–≤–∏—Ç—å';

                    const inbox = document.getElementById('tm-inbox-list');
                    inbox.innerHTML = '';

                    if (msgs.length === 0) {
                        inbox.innerHTML = '<div style="text-align:center;opacity:0.5;padding:30px;">–ü—É—Å—Ç–æ</div>';
                    } else {
                        msgs.forEach(msg => {
                            const item = document.createElement('div');
                            item.className = 'mail-item';
                            item.onclick = () => openMail(msg.id);
                            item.innerHTML = `<div><strong>${escapeHtml(msg.from)}</strong></div><div style="font-size:12px;opacity:0.7">${escapeHtml(msg.subject)}</div>`;
                            inbox.appendChild(item);
                        });
                    }
                } catch (e) { console.error(e); }
            }

            async function openMail(id) {
                const acc = tm_accounts[tm_active_idx];
                showToast('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∏—Å—å–º–∞...');
                try {
                    const res = await fetch(`/api/tempmail/read?token=${acc.token}&id=${id}`);
                    const data = await res.json();

                    document.getElementById('tm-read-subject').innerText = data.subject;
                    document.getElementById('tm-read-from').innerText = data.from;
                    document.getElementById('tm-read-date').innerText = data.date;
                    document.getElementById('tm-read-body').innerHTML = data.htmlBody || data.textBody;

                    // Code Extraction
                    const regex = /(?:code|–∫–æ–¥|pin|pass|verify)[\s\S]{0,50}?(\d{4,8})|(\b\d{5,8}\b)/i;
                    const match = (data.subject + ' ' + (data.textBody || '')).match(regex);
                    const banner = document.getElementById('tm-code-banner');

                    if (match) {
                        document.getElementById('tm-code-value').innerText = match[1] || match[2];
                        banner.style.display = 'flex';
                    } else {
                        banner.style.display = 'none';
                    }

                    document.getElementById('tm-reader').style.display = 'block';
                } catch (e) { showToast('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è', 'error'); }
            }

            function closeReader() { document.getElementById('tm-reader').style.display = 'none'; }
            function deleteCurrentAccount() {
                if (!confirm('–£–¥–∞–ª–∏—Ç—å —è—â–∏–∫?')) return;
                tm_accounts.splice(tm_active_idx, 1);
                if (tm_active_idx >= tm_accounts.length) tm_active_idx = 0;
                saveTempMailState();
            }
            function copyActiveEmail() { navigator.clipboard.writeText(tm_accounts[tm_active_idx].email); showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ'); }
            function copyCode() { navigator.clipboard.writeText(document.getElementById('tm-code-value').innerText); showToast('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'); }

            function toggleHistoryModal() {
                const m = document.getElementById('history-modal');
                m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
                if (m.style.display === 'flex') {
                    const l = document.getElementById('history-list');
                    l.innerHTML = '';
                    tm_history.forEach(h => l.innerHTML += `<div style="padding:10px;border-bottom:1px solid #333">${h.email} <span style="float:right;opacity:0.5">${h.date}</span></div>`);
                }
            }
            function clearHistory() { tm_history = []; saveTempMailState(); toggleHistoryModal(); }

            // --- GENERAL UTILS ---
            function showToast(msg, type = 'info') {
                const t = document.createElement('div');
                t.className = `toast ${type}`;
                t.textContent = msg;
                document.body.appendChild(t);
                setTimeout(() => t.remove(), 3000);
            }

            function escapeHtml(text) { return text ? text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : ''; }

            function toggleTheme() {
                document.body.classList.toggle('light-theme');
                localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
                document.getElementById('theme-icon').textContent = document.body.classList.contains('light-theme') ? '‚òÄÔ∏è' : 'üåô';
            }

            // --- OTHER FUNCTIONS ---
            async function loadMonitors() {
                /* Same as before but minified */
                const res = await fetch('/api/monitors');
                const data = await res.json();
                const tbody = document.getElementById('monitors-body');
                tbody.innerHTML = '';
                document.getElementById('monitors-loading').style.display = 'none';
                document.getElementById('monitors-table').style.display = 'table';
                data.forEach(m => {
                    const statusClass = m.status === 'online' ? 'status-online' : 'status-offline';
                    const statusText = m.status === 'online' ? 'üü¢' : (m.status === 'offline' ? 'üî¥' : '‚ö™');
                    const uptime = m.uptime_percentage !== undefined ? `${m.uptime_percentage}%` : '-';
                    const ping = m.response_time ? `${m.response_time}ms` : '-';
                    const lastCheck = m.last_checked ? new Date(m.last_checked).toLocaleString('ru-RU') : '-';

                    tbody.innerHTML += `<tr>
                    <td>‚≠ê</td>
                    <td class="${statusClass}">${statusText} ${m.status}</td>
                    <td>${m.name}</td>
                    <td><a href="${m.url}" target="_blank">${m.url}</a></td>
                    <td>${uptime}</td>
                    <td>${ping}</td>
                    <td>${lastCheck}</td>
                    <td>
                        <button class="btn btn-sm" onclick="viewMonitorLogs('${m.id}', '${m.name}')">üìä –õ–æ–≥–∏</button>
                        <button class="btn btn-sm btn-danger" onclick="removeMonitor('${m.id}')">Del</button>
                    </td>
                </tr>`;
                });
            }
            async function loadAccounts() {
                const res = await fetch('/api/accounts');
                const data = await res.json();
                const tbody = document.getElementById('accounts-body');
                tbody.innerHTML = '';
                document.getElementById('accounts-loading').style.display = 'none';
                document.getElementById('accounts-table').style.display = 'table';
                data.forEach(a => {
                    tbody.innerHTML += `<tr><td>‚≠ê</td><td>${a.id}</td><td>${a.preview}</td><td>${a.added_by}</td><td>${a.timestamp}</td><td><button class="btn" onclick="viewAccount(${a.id})">View</button></td></tr>`;
                });
            }
            async function loadStats() {
                const res = await fetch('/api/stats');
                const data = await res.json();
                document.getElementById('total-accounts').innerText = data.total_accounts;
                document.getElementById('total-monitors').innerText = data.total_monitors;
                document.getElementById('monitors-online').innerText = data.monitors_online || 0;
                document.getElementById('monitors-offline').innerText = data.monitors_offline || 0;
            }

            async function loadBotStatus() {
                try {
                    const res = await fetch('/api/bot/status');
                    const data = await res.json();

                    document.getElementById('bot-servers').textContent = data.servers;
                    document.getElementById('bot-users').textContent = data.users;
                    document.getElementById('bot-commands').textContent = data.commands_today;

                    const hours = Math.floor(data.uptime / 3600);
                    const minutes = Math.floor((data.uptime % 3600) / 60);
                    const seconds = data.uptime % 60;
                    const uptimeEl = document.getElementById('bot-uptime');
                    if (uptimeEl) {
                        uptimeEl.textContent = `${hours}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    }

                    const memEl = document.getElementById('bot-memory');
                    const cpuEl = document.getElementById('bot-cpu');
                    if (memEl) memEl.textContent = data.memory_used + ' MB';
                    if (cpuEl) cpuEl.textContent = data.cpu_percent.toFixed(1) + '%';

                    const statusEl = document.getElementById('bot-status-text');
                    if (statusEl) {
                        if (data.running) {
                            statusEl.innerHTML = '<span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>';
                        } else {
                            statusEl.innerHTML = '<span class="status-stopped">‚óè –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>';
                        }
                    }
                } catch (e) {
                    console.error('Failed to load bot status:', e);
                }
            }

            async function loadLogs() {
                try {
                    const res = await fetch('/api/logs');
                    const logs = await res.json();
                    const container = document.getElementById('log-container');
                    container.innerHTML = '';

                    if (logs.length === 0) {
                        container.innerHTML = '<div class="log-entry"><span class="log-time">--:--:--</span><span class="log-level info">[INFO]</span><span>–ù–µ—Ç –ª–æ–≥–æ–≤</span></div>';
                    } else {
                        logs.forEach(log => addLogEntry(log));
                    }
                } catch (e) {
                    console.error('Failed to load logs:', e);
                }
            }

            async function loadArizonaServers() {
                // Placeholder
                document.getElementById('arizona-loading').style.display = 'none';
                document.getElementById('arizona-servers-grid').style.display = 'grid';
                document.getElementById('arizona-servers-grid').innerHTML = '<div style="grid-column:1/-1;text-align:center;">API ARIZONA RP –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>';
            }

            function controlBot(action) {
                fetch(`/api/bot/control/${action}`, { method: 'POST' }).then(r => r.json()).then(d => showToast(d.message, d.success ? 'success' : 'error'));
            }

            async function addMonitor() {
                const url = document.getElementById('monitor-url').value;
                const name = document.getElementById('monitor-name').value;
                await fetch('/api/monitors/add', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url, name }) });
                loadMonitors(); showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ');
            }
            async function removeMonitor(id) {
                if (!confirm('–£–¥–∞–ª–∏—Ç—å?')) return;
                await fetch(`/api/monitors/remove/${id}`, { method: 'DELETE' });
                loadMonitors(); showToast('–£–¥–∞–ª–µ–Ω–æ');
            }
            async function viewAccount(id) {
                const res = await fetch(`/api/accounts/${id}`);
                const d = await res.json();
                document.getElementById('modal-content').innerText = JSON.stringify(d, null, 2);
                document.getElementById('viewModal').style.display = 'flex';
            }
            function closeModal() { document.getElementById('viewModal').style.display = 'none'; }

            // --- MONITOR LOGS FUNCTIONS ---
            let currentMonitorId = null;

            async function viewMonitorLogs(monitorId, monitorName) {
                currentMonitorId = monitorId;
                document.getElementById('monitor-logs-title').textContent = `üìä –õ–æ–≥–∏: ${monitorName}`;
                document.getElementById('monitorLogsModal').style.display = 'flex';

                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                try {
                    const statsRes = await fetch(`/api/monitors/${monitorId}/stats`);
                    const stats = await statsRes.json();

                    document.getElementById('monitor-uptime').textContent = stats.uptime_percentage + '%';
                    document.getElementById('monitor-checks').textContent = stats.total_checks;
                    document.getElementById('monitor-ping').textContent = stats.response_time ? stats.response_time + 'ms' : '-';
                    document.getElementById('monitor-status').textContent = stats.status === 'online' ? 'üü¢ Online' : 'üî¥ Offline';

                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–≥–∏
                    const logsRes = await fetch(`/api/monitors/${monitorId}/logs`);
                    const logs = await logsRes.json();

                    const logsContainer = document.getElementById('monitor-logs-content');
                    if (logs.length === 0) {
                        logsContainer.innerHTML = '<p style="opacity: 0.5; text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</p>';
                    } else {
                        logsContainer.innerHTML = logs.map(log => {
                            const typeClass = log.type === 'down' ? 'error' : 'info';
                            const typeIcon = log.type === 'down' ? 'üî¥' : 'üü¢';
                            return `
                            <div class="log-entry">
                                <span class="log-time">${log.timestamp}</span>
                                <span class="log-level ${typeClass}">${typeIcon} ${log.type.toUpperCase()}</span>
                                <span class="log-message">${log.message}</span>
                            </div>
                        `;
                        }).join('');
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤:', error);
                    showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤', 'error');
                }
            }

            function closeMonitorLogsModal() {
                document.getElementById('monitorLogsModal').style.display = 'none';
                currentMonitorId = null;
            }

            async function clearMonitorLogs() {
                if (!currentMonitorId) return;

                if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –ª–æ–≥–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.')) return;

                try {
                    const res = await fetch(`/api/monitors/${currentMonitorId}/clear-logs`, { method: 'POST' });
                    const data = await res.json();

                    if (data.success) {
                        showToast('–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã', 'success');
                        document.getElementById('monitor-logs-content').innerHTML = '<p style="opacity: 0.5; text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</p>';
                    } else {
                        showToast('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤', 'error');
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞:', error);
                    showToast('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤', 'error');
                }
            }

            // --- INIT ---
            window.addEventListener('DOMContentLoaded', () => {
                const theme = localStorage.getItem('theme');
                if (theme === 'light') {
                    document.body.classList.add('light-theme');
                    document.getElementById('theme-icon').textContent = '‚òÄÔ∏è';
                }

                // Init Canvas (Particle Network)
                const canvas = document.getElementById('particleCanvas');
                const ctx = canvas.getContext('2d');
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                let particles = [];
                for (let i = 0; i < 30; i++) particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, vx: (Math.random() - 0.5), vy: (Math.random() - 0.5) });

                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.fillStyle = document.body.classList.contains('light-theme') ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.2)';
                    particles.forEach(p => {
                        p.x += p.vx; p.y += p.vy;
                        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill();
                    });
                    requestAnimationFrame(animate);
                }
                animate();

                // Load Initial Data
                loadStats();
                loadBotStatus();
                loadLogs();
                loadMonitors();
                loadAccounts();

                // Periodic updates (fallback if Socket.IO doesn't work)
                setInterval(loadBotStatus, 5000); // Update bot status every 5 seconds

                // Temp Mail Init
                renderAccountsList();
            });
            // --- GOD MODE ---
            function godSetPrefix() {
                const uid = document.getElementById('gm-user-id').value;
                const p = document.getElementById('gm-prefix').value;
                if (!uid || !p) return showToast('–í–≤–µ–¥–∏—Ç–µ ID –∏ –ø—Ä–µ—Ñ–∏–∫—Å', 'error');

                fetch('/api/admin/set_prefix', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ user_id: uid, prefix: p })
                }).then(r => r.json()).then(d => {
                    if (d.success) { showToast('–ü—Ä–µ—Ñ–∏–∫—Å –∏–∑–º–µ–Ω–µ–Ω', 'success'); loadGodPrefixes(); }
                    else showToast('–û—à–∏–±–∫–∞: ' + (d.error || 'Unknown'), 'error');
                });
            }
            function loadGodPrefixes() {
                fetch('/api/admin/prefixes').then(r => r.json()).then(d => {
                    const div = document.getElementById('gm-prefixes-list');
                    if (!div || d.error) return;
                    if (Object.keys(d).length === 0) { div.innerHTML = '–ù–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤.'; return; }
                    let html = '';
                    for (let uid in d) html += `<div><b>${uid}</b>: <span style="color:#FFD700">${d[uid]}</span></div>`;
                    div.innerHTML = html;
                });
            }

            // --- AI CHAT FUNCTIONS ---
            let aiChatHistory = [];

            function aiQuickAction(prefix) {
                const input = document.getElementById('ai-input');
                input.value = prefix + ' ';
                input.focus();
            }

            function clearAiChat() {
                aiChatHistory = [];
                const messagesDiv = document.getElementById('ai-messages');
                messagesDiv.innerHTML = `
                <div class="ai-welcome">
                    <div class="ai-welcome-icon">ü§ñ</div>
                    <h3>–ü—Ä–∏–≤–µ—Ç! –Ø AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</h3>
                    <p>–ó–∞–¥–∞–π—Ç–µ –º–Ω–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å, –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –∏–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç</p>
                </div>
            `;
                showToast('–ß–∞—Ç –æ—á–∏—â–µ–Ω', 'info');
            }

            function addAiMessage(content, isUser = false) {
                const messagesDiv = document.getElementById('ai-messages');

                // Remove welcome message if exists
                const welcome = messagesDiv.querySelector('.ai-welcome');
                if (welcome) welcome.remove();

                const messageHtml = `
                <div class="ai-message ${isUser ? 'user' : 'bot'}">
                    <div class="ai-message-avatar">${isUser ? 'üë§' : 'ü§ñ'}</div>
                    <div class="ai-message-content">${formatAiMessage(content)}</div>
                </div>
            `;

                messagesDiv.insertAdjacentHTML('beforeend', messageHtml);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }

            function formatAiMessage(text) {
                // Format code blocks
                text = text.replace(/```(\w*)\n?([\s\S]*?)```/g, '<pre><code>$2</code></pre>');
                // Format inline code
                text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
                // Format bold
                text = text.replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>');
                // Format line breaks
                text = text.replace(/\n/g, '<br>');
                return text;
            }

            function showAiTyping() {
                const messagesDiv = document.getElementById('ai-messages');
                const typingHtml = `
                <div class="ai-message bot" id="ai-typing-indicator">
                    <div class="ai-message-avatar">ü§ñ</div>
                    <div class="ai-message-content">
                        <div class="ai-typing">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            `;
                messagesDiv.insertAdjacentHTML('beforeend', typingHtml);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }

            function hideAiTyping() {
                const typing = document.getElementById('ai-typing-indicator');
                if (typing) typing.remove();
            }

            async function sendAiMessage() {
                const input = document.getElementById('ai-input');
                const sendBtn = document.getElementById('ai-send-btn');
                const message = input.value.trim();

                if (!message) return;

                // Disable input while sending
                input.disabled = true;
                sendBtn.disabled = true;

                // Add user message
                addAiMessage(message, true);
                aiChatHistory.push({ role: 'user', content: message });

                // Clear input
                input.value = '';

                // Show typing indicator
                showAiTyping();

                try {
                    const response = await fetch('/api/ai/chat', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: message,
                            history: aiChatHistory
                        })
                    });

                    const data = await response.json();

                    hideAiTyping();

                    if (data.success) {
                        addAiMessage(data.response);
                        aiChatHistory.push({ role: 'assistant', content: data.response });
                    } else {
                        addAiMessage('‚ùå –û—à–∏–±–∫–∞: ' + (data.error || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
                    }
                } catch (error) {
                    hideAiTyping();
                    addAiMessage('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ AI –Ω–∞—Å—Ç—Ä–æ–µ–Ω.');
                    console.error('AI Error:', error);
                }

                // Re-enable input
                input.disabled = false;
                sendBtn.disabled = false;
                input.focus();
            }

            // --- ARIZONA AI FUNCTIONS ---
            let currentArizonaTool = 'helper';

            // Format markdown to HTML
            function formatMarkdown(text) {
                if (!text) return '';
                return text
                    // Headers
                    .replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>')
                    .replace(/\*\*(.+?)\*\*/g, '<h3 style="color:#FFD700;margin:15px 0 10px;font-size:1.1em;">$1</h3>')
                    .replace(/\*(.+?)\*/g, '<em>$1</em>')
                    // Emojis and formatting
                    .replace(/üö´/g, '<span style="color:#ff6b6b;">üö´</span>')
                    .replace(/‚úÖ/g, '<span style="color:#51cf66;">‚úÖ</span>')
                    .replace(/‚è±Ô∏è/g, '<span style="color:#ffd43b;">‚è±Ô∏è</span>')
                    .replace(/üìù/g, '<span style="color:#74c0fc;">üìù</span>')
                    .replace(/‚ùì/g, '<span style="color:#845ef7;">‚ùì</span>')
                    .replace(/‚ùå/g, '<span style="color:#ff6b6b;">‚ùå</span>')
                    .replace(/üí°/g, '<span style="color:#ffd43b;">üí°</span>')
                    .replace(/üìã/g, '<span style="color:#74c0fc;">üìã</span>')
                    .replace(/üìç/g, '<span style="color:#ff922b;">üìç</span>')
                    .replace(/‚ö†Ô∏è/g, '<span style="color:#ffd43b;">‚ö†Ô∏è</span>')
                    // Lists
                    .replace(/^‚Ä¢ /gm, '<span style="color:#845ef7;margin-right:8px;">‚ñ∏</span>')
                    .replace(/^- /gm, '<span style="color:#845ef7;margin-right:8px;">‚ñ∏</span>')
                    // Line breaks
                    .replace(/\n\n/g, '</p><p style="margin:10px 0;">')
                    .replace(/\n/g, '<br>');
            }

            function selectArizonaTool(tool, element) {
                // Hide all tools
                document.querySelectorAll('.arizona-workspace').forEach(el => el.style.display = 'none');
                // Remove active from all cards
                document.querySelectorAll('.arizona-tool-card').forEach(el => el.classList.remove('active'));

                // Show selected tool
                document.getElementById('arizona-tool-' + tool).style.display = 'block';
                // Add active to clicked card
                if (element) element.classList.add('active');

                currentArizonaTool = tool;

                // Initialize calculators
                if (tool === 'calc') {
                    calculateBusiness();
                    calculateFaction();
                }
            }

            async function askArizonaHelper() {
                const input = document.getElementById('arizona-helper-input').value.trim();
                if (!input) return showToast('–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å', 'error');

                const resultDiv = document.getElementById('arizona-helper-result');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<div style="text-align:center;padding:20px;"><div class="loading-spinner"></div><p style="margin-top:10px;color:#aaa;">–ò—â—É –æ—Ç–≤–µ—Ç...</p></div>';

                try {
                    const response = await fetch('/api/arizona/helper', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ question: input })
                    });
                    const data = await response.json();
                    if (data.success) {
                        const source = data.source === 'database' ? 'üìö –ò–∑ –±–∞–∑—ã –ø—Ä–∞–≤–∏–ª' : 'ü§ñ –û—Ç AI';
                        resultDiv.innerHTML = `<div style="margin-bottom:10px;font-size:0.8em;color:#888;">${source}</div><div style="line-height:1.6;">${formatMarkdown(data.response)}</div>`;
                    } else {
                        resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå ' + data.error + '</div>';
                    }
                } catch (e) {
                    resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>';
                }
            }

            async function generateComplaint() {
                const nick = document.getElementById('arizona-complaint-nick').value.trim();
                const desc = document.getElementById('arizona-complaint-desc').value.trim();
                if (!nick || !desc) return showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');

                const resultDiv = document.getElementById('arizona-complaint-result');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<div style="text-align:center;padding:20px;"><div class="loading-spinner"></div><p style="margin-top:10px;color:#aaa;">–°–æ—Å—Ç–∞–≤–ª—è—é –∂–∞–ª–æ–±—É...</p></div>';

                try {
                    const response = await fetch('/api/arizona/complaint', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ nickname: nick, description: desc })
                    });
                    const data = await response.json();
                    resultDiv.innerHTML = data.success ? `<div style="line-height:1.6;">${formatMarkdown(data.response)}</div>` : '<div style="color:#ff6b6b;">‚ùå ' + data.error + '</div>';
                } catch (e) {
                    resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>';
                }
            }

            async function generateLegend() {
                const name = document.getElementById('arizona-legend-name').value.trim();
                const age = document.getElementById('arizona-legend-age').value || '25';
                const style = document.getElementById('arizona-legend-style').value;
                if (!name) return showToast('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞', 'error');

                const resultDiv = document.getElementById('arizona-legend-result');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<div style="text-align:center;padding:20px;"><div class="loading-spinner"></div><p style="margin-top:10px;color:#aaa;">–°–æ–∑–¥–∞—é –ª–µ–≥–µ–Ω–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞...</p></div>';

                try {
                    const response = await fetch('/api/arizona/legend', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, age, style })
                    });
                    const data = await response.json();
                    resultDiv.innerHTML = data.success ? `<div style="line-height:1.8;">${formatMarkdown(data.response)}</div>` : '<div style="color:#ff6b6b;">‚ùå ' + data.error + '</div>';
                } catch (e) {
                    resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>';
                }
            }

            async function checkRules() {
                const input = document.getElementById('arizona-rules-input').value.trim();
                if (!input) return showToast('–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å', 'error');

                const resultDiv = document.getElementById('arizona-rules-result');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = '<div style="text-align:center;padding:20px;"><div class="loading-spinner"></div><p style="margin-top:10px;color:#aaa;">–ò—â—É –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö...</p></div>';

                try {
                    const response = await fetch('/api/arizona/rules', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ question: input })
                    });
                    const data = await response.json();
                    if (data.success) {
                        const source = data.source === 'database' ? 'üìö –ò–∑ –±–∞–∑—ã –ø—Ä–∞–≤–∏–ª' : 'ü§ñ –û—Ç AI';
                        resultDiv.innerHTML = `<div style="margin-bottom:10px;font-size:0.8em;color:#888;">${source}</div><div style="line-height:1.6;">${formatMarkdown(data.response)}</div>`;
                    } else {
                        resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå ' + data.error + '</div>';
                    }
                } catch (e) {
                    resultDiv.innerHTML = '<div style="color:#ff6b6b;">‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è</div>';
                }
            }

            function calculateBusiness() {
                const type = document.getElementById('calc-business-type').value;
                const level = parseInt(document.getElementById('calc-business-level').value) || 1;

                // Base income per business type (approximate Arizona RP values)
                const baseIncome = {
                    '24/7': 500,
                    'clothes': 700,
                    'gas': 600,
                    'automarket': 1200,
                    'club': 800
                };

                const base = baseIncome[type] || 500;
                const hourly = base + (level * 150);
                const daily = hourly * 24;
                const upgradeCost = level * 50000;

                document.getElementById('calc-biz-income').textContent = '$' + hourly.toLocaleString();
                document.getElementById('calc-biz-daily').textContent = '$' + daily.toLocaleString();
                document.getElementById('calc-biz-upgrade').textContent = '$' + upgradeCost.toLocaleString();
            }

            function calculateFaction() {
                const faction = document.getElementById('calc-faction').value;
                const rank = parseInt(document.getElementById('calc-faction-rank').value) || 1;

                // Base salary per faction (approximate Arizona RP values)
                const baseSalary = {
                    'pd': 3000,
                    'fbi': 4500,
                    'army': 4000,
                    'ems': 2500,
                    'gov': 5000
                };

                const base = baseSalary[faction] || 3000;
                const salary = base + (rank * 800);
                const paycheck = Math.round(salary / 2);

                document.getElementById('calc-faction-salary').textContent = '$' + salary.toLocaleString();
                document.getElementById('calc-faction-paycheck').textContent = '$' + paycheck.toLocaleString();
            }

        </script>
</body>

</html>