<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bot Dashboard Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.5s ease, color 0.5s ease;
            position: relative;
        }

        body.light-theme {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #202124;
        }

        /* ANIMATED WAVES */
        .waves {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            z-index: 0;
            opacity: 0.3;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background-repeat: repeat-x;
            animation: wave 20s linear infinite;
        }

        .wave:nth-child(1) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,60 Q300,0 600,60 T1200,60 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.3'/%3E%3C/svg%3E");
            animation-duration: 25s;
        }

        .wave:nth-child(2) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,80 Q300,40 600,80 T1200,80 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.2'/%3E%3C/svg%3E");
            animation-duration: 20s;
            animation-direction: reverse;
        }

        .wave:nth-child(3) {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0,100 Q300,60 600,100 T1200,100 L1200,120 L0,120 Z' fill='%23ffffff' fill-opacity='0.1'/%3E%3C/svg%3E");
            animation-duration: 30s;
        }

        @keyframes wave {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .theme-toggle {
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            padding: 12px 24px;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .tabs {
            position: fixed;
            top: 100px;
            right: 30px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 12px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: white;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
            border: none;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 80px 40px;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 72px;
            font-weight: 700;
            letter-spacing: -2px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #fff 0%, rgba(255, 255, 255, 0.8) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .light-theme h1 {
            background: linear-gradient(135deg, #202124 0%, rgba(32, 33, 36, 0.8) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            font-size: 20px;
            font-weight: 300;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .light-theme .stat-card {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .light-theme .stat-card:hover {
            background: rgba(255, 255, 255, 0.95);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-value {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 12px;
            font-weight: 500;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .light-theme .section {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        h2 {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 15px 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            font-size: 11px;
            font-weight: 600;
            opacity: 0.7;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        td {
            font-size: 14px;
        }

        tr {
            transition: all 0.3s;
            position: relative;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.01);
        }

        .light-theme tr:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .favorite-star {
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            display: inline-block;
        }

        .favorite-star:hover {
            transform: scale(1.3) rotate(72deg);
        }

        .favorite-star.active {
            color: #fbbf24;
            filter: drop-shadow(0 0 8px #fbbf24);
        }

        .status-online {
            color: #4ade80;
            font-weight: 600;
        }

        .status-offline {
            color: #f87171;
            font-weight: 600;
        }

        .status-running {
            color: #4ade80;
        }

        .status-stopped {
            color: #f87171;
        }

        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::after {
            width: 300px;
            height: 300px;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .light-theme .btn {
            background: rgba(0, 0, 0, 0.1);
            color: #202124;
            border-color: rgba(0, 0, 0, 0.2);
        }

        .light-theme .btn:hover {
            background: rgba(0, 0, 0, 0.15);
        }

        .btn-danger {
            background: rgba(248, 113, 113, 0.3);
            border-color: rgba(248, 113, 113, 0.5);
        }

        .btn-danger:hover {
            background: rgba(248, 113, 113, 0.5);
        }

        .btn-success {
            background: rgba(74, 222, 128, 0.3);
            border-color: rgba(74, 222, 128, 0.5);
        }

        .btn-success:hover {
            background: rgba(74, 222, 128, 0.5);
        }

        .btn-warning {
            background: rgba(251, 191, 36, 0.3);
            border-color: rgba(251, 191, 36, 0.5);
        }

        .btn-warning:hover {
            background: rgba(251, 191, 36, 0.5);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        input {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
        }

        .light-theme input {
            background: rgba(255, 255, 255, 0.9);
            color: #202124;
            border-color: rgba(0, 0, 0, 0.2);
        }

        input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .light-theme input::placeholder {
            color: rgba(0, 0, 0, 0.5);
        }

        input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .light-theme input:focus {
            border-color: #667eea;
            background: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 999;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            padding: 35px;
            border-radius: 20px;
            max-width: 700px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 80vh;
            overflow-y: auto;
        }

        .light-theme .modal-content {
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(0, 0, 0, 0.1);
        }

        .modal-content pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            color: #fff;
            font-size: 13px;
        }

        .light-theme .modal-content pre {
            background: rgba(0, 0, 0, 0.05);
            color: #202124;
        }

        .skeleton {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
            background-size: 200% 100%;
            animation: skeleton 1.5s infinite;
            border-radius: 8px;
            height: 50px;
            margin-bottom: 12px;
        }

        .light-theme .skeleton {
            background: linear-gradient(90deg, rgba(0, 0, 0, 0.05) 25%, rgba(0, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0.05) 75%);
            background-size: 200% 100%;
        }

        @keyframes skeleton {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        a {
            color: white;
            text-decoration: none;
            opacity: 0.9;
        }

        a:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .light-theme a {
            color: #667eea;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.95);
            color: #202124;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            animation: slideIn 0.3s ease-out;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-size: 14px;
        }

        .toast.success {
            border-left: 4px solid #4ade80;
        }

        .toast.error {
            border-left: 4px solid #f87171;
        }

        .toast.info {
            border-left: 4px solid #60a5fa;
        }

        .toast.warning {
            border-left: 4px solid #fbbf24;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .log-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .light-theme .log-container {
            background: rgba(0, 0, 0, 0.05);
        }

        .log-entry {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: #60a5fa;
            margin-right: 10px;
        }

        .log-level {
            font-weight: 600;
            margin-right: 10px;
        }

        .log-level.info {
            color: #4ade80;
        }

        .log-level.warning {
            color: #fbbf24;
        }

        .log-level.error {
            color: #f87171;
        }

        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .leaderboard-rank {
            font-size: 24px;
            font-weight: 700;
            margin-right: 15px;
            min-width: 40px;
        }

        .leaderboard-rank.gold {
            color: #fbbf24;
        }

        .leaderboard-rank.silver {
            color: #d1d5db;
        }

        .leaderboard-rank.bronze {
            color: #f97316;
        }

        .leaderboard-info {
            flex: 1;
        }

        .leaderboard-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .leaderboard-count {
            font-size: 12px;
            opacity: 0.7;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.1);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 6px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            transition: width 1s ease-out;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 40px 20px;
            }

            h1 {
                font-size: 42px;
            }

            .subtitle {
                font-size: 16px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-value {
                font-size: 32px;
            }

            .section {
                padding: 20px;
            }

            h2 {
                font-size: 22px;
            }

            .input-group {
                flex-direction: column;
            }

            table {
                font-size: 12px;
            }

            th,
            td {
                padding: 10px 6px;
            }

            .theme-toggle {
                top: 20px;
                right: 20px;
            }

            .tabs {
                top: 80px;
                right: 20px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <canvas id="particleCanvas"></canvas>

    {% if user %}
    <div class="user-profile" onclick="switchTab('profile')"
        style="cursor: pointer; transition: all 0.3s; position: fixed; top: 30px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; background: rgba(255,255,255,0.2); backdrop-filter: blur(10px); padding: 8px 16px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.3);"
        onmouseover="this.style.background='rgba(255,255,255,0.3)'"
        onmouseout="this.style.background='rgba(255,255,255,0.2)'">
        <img src="{{ user.avatar }}" alt="avatar" style="width: 32px; height: 32px; border-radius: 50%;">
        <span style="font-weight: 600; font-size: 14px;">{{ user.username }}</span>
        <a href="/logout" title="–í—ã–π—Ç–∏" onclick="event.stopPropagation()"
            style="margin-left: 5px; opacity: 0.7; font-size: 18px; text-decoration: none;">üö™</a>
    </div>
    {% else %}
    <a href="{{ auth_url }}"
        style="position: fixed; top: 30px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; background: #5865F2; backdrop-filter: blur(10px); padding: 10px 20px; border-radius: 50px; border: 1px solid rgba(255,255,255,0.3); text-decoration: none; color: white; font-weight: 600; font-size: 14px; transition: all 0.3s;"
        onmouseover="this.style.background='#4752c4'" onmouseout="this.style.background='#5865F2'">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z" />
        </svg>
        –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Discord
    </a>
    {% endif %}

    <div class="theme-toggle" onclick="toggleTheme()" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">
        <span id="theme-icon">üåô</span>
    </div>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
        <button class="tab-btn" onclick="switchTab('control')">üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
        <button class="tab-btn" onclick="switchTab('data')">üìã –î–∞–Ω–Ω—ã–µ</button>
        <button class="tab-btn" onclick="switchTab('favorites')">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button class="tab-btn" onclick="switchTab('arizona')">üåµ Arizona RP</button>
        <button class="tab-btn" onclick="switchTab('tempmail')">üìß Temp Mail</button>
    </div>

    <div class="modal" id="viewModal">
        <div class="modal-content">
            <h2>üìÑ –ü–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ</h2>
            <pre id="modal-content"></pre>
            <button class="btn" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- Monitor Logs Modal -->
    <div class="modal" id="monitorLogsModal">
        <div class="modal-content" style="max-width: 900px;">
            <h2 id="monitor-logs-title">üìä –õ–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h2>

            <div class="stats-grid" style="margin-bottom: 20px;">
                <div class="stat-card">
                    <div class="stat-value" id="monitor-uptime">-</div>
                    <div class="stat-label">Uptime %</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-checks">-</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-ping">-</div>
                    <div class="stat-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π Ping</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitor-status">-</div>
                    <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
                </div>
            </div>

            <h3 style="margin-bottom: 15px;">üìù –ò—Å—Ç–æ—Ä–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</h3>
            <div class="log-container" id="monitor-logs-content" style="max-height: 400px; overflow-y: auto;">
                <p style="opacity: 0.5;">–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ–≤...</p>
            </div>

            <div class="btn-group" style="margin-top: 20px;">
                <button class="btn btn-warning" onclick="clearMonitorLogs()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
                <button class="btn" onclick="closeMonitorLogsModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Bot Dashboard Pro</h1>
            <p class="subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
        </header>

        <!-- DASHBOARD TAB -->
        <div id="tab-dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="bot-servers">-</div>
                    <div class="stat-label">–°–µ—Ä–≤–µ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="bot-users">-</div>
                    <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="bot-commands">-</div>
                    <div class="stat-label">–ö–æ–º–∞–Ω–¥ —Å–µ–≥–æ–¥–Ω—è</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-accounts">-</div>
                    <div class="stat-label">–ó–∞–ø–∏—Å–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-monitors">-</div>
                    <div class="stat-label">–ú–æ–Ω–∏—Ç–æ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monitors-online">-</div>
                    <div class="stat-label">–û–Ω–ª–∞–π–Ω</div>
                </div>
            </div>

            <div class="grid-2">
                <div class="section">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</h2>
                    <div style="position: relative; height: 250px;">
                        <canvas id="monitorChart"></canvas>
                    </div>
                </div>

                <div class="section">
                    <h2>üèÜ –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
                    <div id="leaderboard-container"></div>
                </div>
            </div>

            <div class="section">
                <h2>üí¨ –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
                <div class="log-container" id="log-container">
                    <div class="log-entry">
                        <span class="log-time">--:--:--</span>
                        <span class="log-level info">[INFO]</span>
                        <span>–û–∂–∏–¥–∞–Ω–∏–µ –ª–æ–≥–æ–≤...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- CONTROL TAB -->
        <div id="tab-control" class="tab-content">
            <div class="section">
                <h2>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º</h2>
                <div class="stats-grid" style="margin-bottom: 20px;">
                    <div class="stat-card">
                        <div class="stat-label">–°—Ç–∞—Ç—É—Å</div>
                        <div class="stat-value" id="bot-status-text" style="font-size: 24px;">
                            <span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Uptime</div>
                        <div class="stat-value" id="bot-uptime" style="font-size: 24px;">0:00:00</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">CPU</div>
                        <div class="stat-value" id="bot-cpu" style="font-size: 24px;">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">RAM</div>
                        <div class="stat-value" id="bot-memory" style="font-size: 24px;">0 MB</div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-success" onclick="controlBot('start')">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn-danger" onclick="controlBot('stop')">‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn btn-warning" onclick="controlBot('restart')">üîÑ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
                </div>
            </div>

            <div class="section">
                <h2>üì° –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2>
                <div class="input-group">
                    <input type="text" id="monitor-url" placeholder="URL —Å–∞–π—Ç–∞">
                    <input type="text" id="monitor-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ">
                    <button class="btn" onclick="addMonitor()">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div id="monitors-loading">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>
                <table id="monitors-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>URL</th>
                            <th>Uptime %</th>
                            <th>Ping</th>
                            <th>–ü—Ä–æ–≤–µ—Ä–∫–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="monitors-body"></tbody>
                </table>
            </div>
        </div>

        <!-- DATA TAB -->
        <div id="tab-data" class="tab-content">
            <div class="section">
                <h2>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å—è–º–∏</h2>
                <button class="btn btn-success" onclick="exportData()" style="margin-bottom: 20px;">üì•
                    –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                <div id="accounts-loading">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>
                <table id="accounts-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>ID</th>
                            <th>–ü—Ä–µ–≤—å—é</th>
                            <th>–î–æ–±–∞–≤–∏–ª</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="accounts-body"></tbody>
                </table>
            </div>
        </div>

        <!-- ARIZONA RP TAB -->
        <div id="tab-arizona" class="tab-content">
            <div class="stats-grid" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="stat-value" id="arizona-total-servers">28</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="arizona-online-servers">-</div>
                    <div class="stat-label">–û–Ω–ª–∞–π–Ω</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="arizona-total-players">-</div>
                    <div class="stat-label">–ò–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="arizona-average-load">-</div>
                    <div class="stat-label">–°—Ä–µ–¥–Ω—è—è –∑–∞–≥—Ä—É–∑–∫–∞</div>
                </div>
            </div>

            <div class="section">
                <h2>üéÆ –°–µ—Ä–≤–µ—Ä—ã Arizona RP</h2>
                <div class="btn-group" style="margin-bottom: 20px;">
                    <button class="btn btn-success" onclick="loadArizonaServers()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
                    <button class="btn" onclick="filterArizonaServers('all')">–í—Å–µ</button>
                    <button class="btn" onclick="filterArizonaServers('online')">–û–Ω–ª–∞–π–Ω</button>
                    <button class="btn" onclick="filterArizonaServers('offline')">–û—Ñ–ª–∞–π–Ω</button>
                </div>

                <div id="arizona-loading">
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                    <div class="skeleton"></div>
                </div>

                <div id="arizona-servers-grid"
                    style="display: none; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                    <!-- Server cards will be inserted here -->
                </div>
            </div>
        </div>

        <!-- FAVORITES TAB -->
        <div id="tab-favorites" class="tab-content">
            <div class="section">
                <h2>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –º–æ–Ω–∏—Ç–æ—Ä—ã</h2>
                <table id="favorites-monitors-table">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>–°—Ç–∞—Ç—É—Å</th>
                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                            <th>URL</th>
                            <th>–ü—Ä–æ–≤–µ—Ä–∫–∞</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="favorites-monitors-body"></tbody>
                </table>
            </div>

            <div class="section">
                <h2>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏</h2>
                <table id="favorites-accounts-table">
                    <thead>
                        <tr>
                            <th>‚≠ê</th>
                            <th>ID</th>
                            <th>–ü—Ä–µ–≤—å—é</th>
                            <th>–î–æ–±–∞–≤–∏–ª</th>
                            <th>–í—Ä–µ–º—è</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="favorites-accounts-body"></tbody>
                </table>
            </div>
        </div>

        <!-- TEMP MAIL TAB -->
        <div id="tab-tempmail" class="tab-content">
            <style>
                .mail-layout {
                    display: grid;
                    grid-template-columns: 280px 1fr;
                    gap: 20px;
                    height: calc(100vh - 200px);
                    min-height: 600px;
                }

                .mail-sidebar {
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 16px;
                    padding: 20px;
                    display: flex;
                    flex-direction: column;
                    border: 1px solid rgba(255, 255, 255, 0.05);
                }

                .account-item {
                    padding: 12px;
                    margin-bottom: 8px;
                    background: rgba(255, 255, 255, 0.05);
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.2s;
                    border: 1px solid transparent;
                    position: relative;
                }

                .account-item:hover {
                    background: rgba(255, 255, 255, 0.1);
                }

                .account-item.active {
                    background: rgba(74, 222, 128, 0.1);
                    border-color: #4ade80;
                }

                .account-email {
                    font-size: 13px;
                    font-weight: 500;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    color: #e2e8f0;
                }

                .account-badge {
                    background: #ef4444;
                    color: white;
                    border-radius: 10px;
                    padding: 2px 6px;
                    font-size: 10px;
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    display: none;
                }

                .mail-main {
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 16px;
                    display: flex;
                    flex-direction: column;
                    overflow: hidden;
                    border: 1px solid rgba(255, 255, 255, 0.05);
                    position: relative;
                }

                .mail-toolbar {
                    padding: 15px 20px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    background: rgba(0, 0, 0, 0.1);
                }

                .inbox-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }

                .mail-item {
                    padding: 15px 20px;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                    cursor: pointer;
                    transition: background 0.2s;
                    display: block;
                }

                .mail-item:hover {
                    background: rgba(255, 255, 255, 0.05);
                }

                .code-banner {
                    background: rgba(16, 185, 129, 0.2);
                    border: 1px solid #10b981;
                    padding: 15px;
                    border-radius: 8px;
                    margin-bottom: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    animation: slideDown 0.3s ease-out;
                }

                .code-value {
                    font-size: 28px;
                    font-weight: 800;
                    letter-spacing: 3px;
                    font-family: monospace;
                    color: #4ade80;
                    text-shadow: 0 0 10px rgba(74, 222, 128, 0.3);
                }

                #history-modal {
                    display: none;
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    z-index: 9999;
                    align-items: center;
                    justify-content: center;
                    backdrop-filter: blur(5px);
                }
            </style>

            <div class="mail-layout">
                <div class="mail-sidebar">
                    <button class="btn btn-success" onclick="createTempMail()"
                        style="margin-bottom: 20px; font-weight: 600;">‚ûï –ù–æ–≤–∞—è –ø–æ—á—Ç–∞</button>
                    <div
                        style="font-size: 12px; text-transform: uppercase; letter-spacing: 1px; opacity: 0.5; margin-bottom: 15px; font-weight: 600;">
                        –ê–∫—Ç–∏–≤–Ω—ã–µ —è—â–∏–∫–∏</div>
                    <div id="tm-accounts-list" style="flex: 1; overflow-y: auto;"></div>
                    <div style="margin-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                        <button class="btn btn-sm" onclick="toggleHistoryModal()"
                            style="width: 100%; opacity: 0.7; background: rgba(255,255,255,0.05);">üìú –ò—Å—Ç–æ—Ä–∏—è
                            –∞–¥—Ä–µ—Å–æ–≤</button>
                    </div>
                </div>

                <div class="mail-main">
                    <div id="tm-empty-state"
                        style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; text-align: center; opacity: 0.6;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üìß</div>
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —è—â–∏–∫</h3>
                        <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é —Å–ª–µ–≤–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏</p>
                    </div>

                    <div id="tm-content" style="display: none; height: 100%; flex-direction: column;">
                        <div class="mail-toolbar">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div
                                    style="width: 10px; height: 10px; background: #4ade80; border-radius: 50%; box-shadow: 0 0 10px #4ade80;">
                                </div>
                                <code id="tm-active-email"
                                    style="font-size: 16px; color: #fff; font-weight: 600;">...</code>
                                <button class="btn-icon" onclick="copyActiveEmail()" title="–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å">üìã</button>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-sm" onclick="checkCurrentMail()" id="tm-refresh-btn">üîÑ
                                    –û–±–Ω–æ–≤–∏—Ç—å</button>
                                <button class="btn btn-sm btn-danger" onclick="deleteCurrentAccount()">üóëÔ∏è
                                    –£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                        <div id="tm-inbox-list" class="inbox-list"></div>
                    </div>

                    <div id="tm-reader"
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #1a1b26; padding: 0; display: none; overflow-y: auto; z-index: 10;">
                        <div
                            style="padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.2); position: sticky; top: 0;">
                            <button class="btn btn-sm" onclick="closeReader()">‚¨Ö –ù–∞–∑–∞–¥</button>
                            <h3 style="margin: 0; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                                id="tm-read-subject-header">...</h3>
                        </div>
                        <div style="padding: 30px; max-width: 800px; margin: 0 auto;">
                            <div id="tm-code-banner" class="code-banner" style="display: none;">
                                <div>
                                    <div
                                        style="text-transform: uppercase; font-size: 12px; font-weight: 700; opacity: 0.8; margin-bottom: 5px;">
                                        –ù–∞–π–¥–µ–Ω –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</div>
                                    <div id="tm-code-value" class="code-value">123456</div>
                                </div>
                                <button class="btn btn-success" onclick="copyCode()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                            </div>

                            <h1 id="tm-read-subject" style="margin-bottom: 15px; line-height: 1.4;">Subject</h1>
                            <div style="margin-bottom: 30px; font-size: 14px; opacity: 0.6; display: flex; gap: 20px;">
                                <span>FROM: <b id="tm-read-from" style="color: #fff;">...</b></span>
                                <span>DATE: <span id="tm-read-date">...</span></span>
                            </div>
                            <div id="tm-read-body"
                                style="font-size: 16px; line-height: 1.6; color: #e2e8f0; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PROFILE TAB -->
        <div id="tab-profile" class="tab-content">
            {% if user %}
            <div
                style="background: rgba(0,0,0,0.2); border-radius: 20px; padding: 40px; text-align: center; margin-bottom: 30px; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden;">
                <div
                    style="position: absolute; top: 0; left: 0; width: 100%; height: 100px; background: linear-gradient(90deg, #5865F2, #eb459e); opacity: 0.2;">
                </div>
                <div style="position: relative; z-index: 1;">
                    <img src="{{ user.avatar }}"
                        style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid #1a1b1e; margin-bottom: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                    <h1 style="font-size: 32px; margin-bottom: 5px;">{{ user.username }}</h1>
                    <div style="opacity: 0.5; font-family: monospace; margin-bottom: 15px;">ID: {{ user.id }}</div>
                    {% if user.is_founder %}
                    <span
                        style="background: linear-gradient(135deg, #FFD700, #FFA500); color: black; padding: 6px 16px; border-radius: 20px; font-weight: 800; font-size: 14px; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4); text-transform: uppercase;">
                        üëë –û—Å–Ω–æ–≤–∞—Ç–µ–ª—å
                    </span>
                    {% else %}
                    <span
                        style="background: #5865F2; padding: 6px 16px; border-radius: 20px; font-weight: 600; font-size: 14px; box-shadow: 0 4px 15px rgba(88, 101, 242, 0.4);">
                        üõ°Ô∏è Administrator
                    </span>
                    {% endif %}
                </div>
            </div>

            <div class="grid-2">
                <div class="section">
                    <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <div>
                                <div style="font-weight: 600;">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                                <div style="font-size: 12px; opacity: 0.6;">–ü–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –±–æ—Ç–∞</div>
                            </div>
                            <input type="checkbox" checked style="width: 20px; height: 20px;">
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05);">
                            <div>
                                <div style="font-weight: 600;">–ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
                                <div style="font-size: 12px; opacity: 0.6;">–ó–≤—É–∫ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –ª–æ–≥–∞—Ö</div>
                            </div>
                            <input type="checkbox" style="width: 20px; height: 20px;">
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                            <div>
                                <div style="font-weight: 600;">Developer Mode</div>
                                <div style="font-size: 12px; opacity: 0.6;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ID –æ–±—ä–µ–∫—Ç–æ–≤</div>
                            </div>
                            <input type="checkbox" checked style="width: 20px; height: 20px;">
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <a href="/logout" class="btn btn-danger"
                            style="width: 100%; display: block; text-align: center; text-decoration: none;">–í—ã–π—Ç–∏ –∏–∑
                            –∞–∫–∫–∞—É–Ω—Ç–∞</a>
                    </div>
                </div>

                <div class="section">
                    <h2>üìú –í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</h2>
                    <div id="user-personal-log"
                        style="max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 13px;">
                        <div style="padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); opacity: 0.7;">
                            <span style="color: #4ade80;">[AUTH]</span> –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω
                        </div>
                    </div>
                </div>

                {% if user.is_founder %}
                <div class="section"
                    style="border: 1px solid rgba(255, 215, 0, 0.3); background: rgba(255, 215, 0, 0.05);">
                    <h2 style="color: #FFD700;">üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
                    <div class="input-group">
                        <input type="text" id="gm-user-id" placeholder="ID">
                        <input type="text" id="gm-prefix" placeholder="Prefix">
                        <button class="btn btn-warning" onclick="godSetPrefix()">Set</button>
                    </div>
                    <div id="gm-prefixes-list"
                        style="margin-top: 10px; font-family: monospace; font-size: 12px; opacity: 0.8;"></div>
                </div>
                {% endif %}
            </div>
            {% else %}
            <div style="text-align: center; padding: 60px 20px;">
                <div style="font-size: 64px; margin-bottom: 20px;">üîí</div>
                <h2 style="margin-bottom: 10px;">–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
                <p style="opacity: 0.7; margin-bottom: 30px;">–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É, —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</p>
                <a href="/" class="btn" style="text-decoration: none; display: inline-block;">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
            </div>
            {% endif %}
        </div>

        <!-- HISTORY MODAL -->
        <div id="history-modal" onclick="if(event.target === this) toggleHistoryModal()">
            <div
                style="background: #1e293b; padding: 30px; border-radius: 16px; width: 500px; max-width: 90%; max-height: 80vh; display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 style="margin: 0;">üìú –ò—Å—Ç–æ—Ä–∏—è –∞–¥—Ä–µ—Å–æ–≤</h2>
                    <button class="btn-icon" onclick="toggleHistoryModal()">‚ùå</button>
                </div>
                <div id="history-list" style="overflow-y: auto; flex: 1; margin: 0 -10px; padding: 0 10px;"></div>
                <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
                    <button class="btn btn-sm btn-danger" onclick="clearHistory()">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const socket = io();

        socket.on('connect', () => {
            console.log('Connected to WebSocket');
            showToast('–ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ —Å–µ—Ä–≤–µ—Ä—É', 'success');
        });

        socket.on('stats_update', (data) => {
            // Update stats logic
            document.getElementById('bot-servers').textContent = data.servers;
            document.getElementById('bot-users').textContent = data.users;
            document.getElementById('bot-commands').textContent = data.commands_today;

            const hours = Math.floor(data.uptime / 3600);
            const minutes = Math.floor((data.uptime % 3600) / 60);
            const seconds = data.uptime % 60;
            document.getElementById('bot-uptime').textContent = `${hours}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            document.getElementById('bot-memory').textContent = data.memory_used + ' MB';
            document.getElementById('bot-cpu').textContent = data.cpu_percent.toFixed(1) + '%';

            const statusEl = document.getElementById('bot-status-text');
            if (data.running) {
                statusEl.innerHTML = '<span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>';
            } else {
                statusEl.innerHTML = '<span class="status-stopped">‚óè –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>';
            }
        });

        socket.on('log_new', (log) => addLogEntry(log));

        function addLogEntry(log) {
            const container = document.getElementById('log-container');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `
                <span class="log-time">${log.timestamp}</span>
                <span class="log-level ${log.level}">[${log.level.toUpperCase()}]</span>
                <span>${log.message}</span>
            `;
            container.insertBefore(entry, container.firstChild);

            while (container.children.length > 50) {
                container.removeChild(container.lastChild);
            }
        }

        // --- TABS & NAVIGATION ---
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Activate button
            const tabs = ['dashboard', 'control', 'data', 'favorites', 'arizona', 'tempmail'];
            const index = tabs.indexOf(tab);
            const btns = document.querySelectorAll('.tab-btn');
            if (btns[index]) btns[index].classList.add('active');

            // Activate content
            const content = document.getElementById(`tab-${tab}`);
            if (content) content.classList.add('active');

            // Load tab specific data
            if (tab === 'favorites') { loadFavoriteMonitors(); loadFavoriteAccounts(); }
            else if (tab === 'arizona') { loadArizonaServers(); }
            else if (tab === 'tempmail') {
                renderAccountsList();
                if (tm_accounts.length > 0) checkCurrentMail(true);
            } else if (tab === 'profile') {
                if (typeof loadGodPrefixes === 'function') loadGodPrefixes();
            }
        }

        // --- FAVORITES SYSTEM ---
        let favorites = JSON.parse(localStorage.getItem('favorites') || '{"monitors": [], "accounts": []}');

        function toggleFavorite(type, id) {
            const list = favorites[type];
            const index = list.indexOf(id);
            if (index > -1) {
                list.splice(index, 1);
                showToast('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');
            } else {
                list.push(id);
                showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ', 'success');
            }
            localStorage.setItem('favorites', JSON.stringify(favorites));

            if (type === 'monitors') { loadMonitors(); loadFavoriteMonitors(); }
            else { loadAccounts(); loadFavoriteAccounts(); }
        }

        function isFavorite(type, id) { return favorites[type].includes(id); }

        function loadFavoriteMonitors() {
            fetch('/api/monitors').then(r => r.json()).then(monitors => {
                const tbody = document.getElementById('favorites-monitors-body');
                tbody.innerHTML = '';
                const favs = monitors.filter(m => isFavorite('monitors', m.id));
                if (favs.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:20px;opacity:0.5;">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</td></tr>';
                    return;
                }
                favs.forEach(m => {
                    tbody.innerHTML += `<tr><td>‚≠ê</td><td>${m.status}</td><td>${m.name}</td><td>${m.url}</td><td>-</td><td><button class="btn btn-sm btn-danger" onclick="removeMonitor('${m.id}')">X</button></td></tr>`;
                });
            });
        }

        function loadFavoriteAccounts() {
            fetch('/api/accounts').then(r => r.json()).then(accs => {
                const tbody = document.getElementById('favorites-accounts-body');
                tbody.innerHTML = '';
                const favs = accs.filter(a => isFavorite('accounts', a.id));
                if (favs.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:20px;opacity:0.5;">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö</td></tr>';
                    return;
                }
                favs.forEach(a => {
                    tbody.innerHTML += `<tr><td>‚≠ê</td><td>${a.id}</td><td>${a.preview}</td><td>${a.added_by}</td><td>${a.timestamp}</td><td><button class="btn btn-sm" onclick="viewAccount(${a.id})">üîç</button></td></tr>`;
                });
            });
        }

        // --- TEMP MAIL LOGIC ---
        let tm_accounts = JSON.parse(localStorage.getItem('tm_accounts') || '[]');
        let tm_history = JSON.parse(localStorage.getItem('tm_history') || '[]');
        let tm_active_idx = parseInt(localStorage.getItem('tm_active_idx') || '0');
        if (tm_active_idx >= tm_accounts.length) tm_active_idx = 0;

        function saveTempMailState() {
            localStorage.setItem('tm_accounts', JSON.stringify(tm_accounts));
            localStorage.setItem('tm_history', JSON.stringify(tm_history));
            localStorage.setItem('tm_active_idx', tm_active_idx);
            renderAccountsList();
        }

        async function createTempMail() {
            showToast('–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—á—Ç—ã...', 'info');
            try {
                const res = await fetch('/api/tempmail/create?count=1');
                const data = await res.json();
                if (data.error) throw new Error(data.error);

                const newAcc = { ...data[0], created_at: Date.now() };
                tm_accounts.unshift(newAcc);
                tm_active_idx = 0;

                // Add to history
                if (!tm_history.some(h => h.email === newAcc.email)) {
                    tm_history.unshift({ email: newAcc.email, date: new Date().toLocaleTimeString() });
                    if (tm_history.length > 50) tm_history.pop();
                }

                saveTempMailState();
                showToast('–ü–æ—á—Ç–∞ –≥–æ—Ç–æ–≤–∞!', 'success');
                checkCurrentMail();
            } catch (e) {
                console.error(e);
                showToast('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ' + e.message, 'error');
            }
        }

        function renderAccountsList() {
            const list = document.getElementById('tm-accounts-list');
            list.innerHTML = '';

            if (tm_accounts.length === 0) {
                list.innerHTML = '<div style="text-align:center;opacity:0.5;padding:20px;">–ù–µ—Ç —è—â–∏–∫–æ–≤</div>';
                document.getElementById('tm-empty-state').style.display = 'flex';
                document.getElementById('tm-content').style.display = 'none';
                return;
            }

            document.getElementById('tm-empty-state').style.display = 'none';
            document.getElementById('tm-content').style.display = 'flex';

            tm_accounts.forEach((acc, idx) => {
                const isActive = idx === tm_active_idx;
                const el = document.createElement('div');
                el.className = `account-item ${isActive ? 'active' : ''}`;
                el.onclick = () => { tm_active_idx = idx; saveTempMailState(); checkCurrentMail(); };
                el.innerHTML = `<div class="account-email">${acc.email}</div>`;
                list.appendChild(el);
            });

            if (tm_accounts[tm_active_idx]) {
                document.getElementById('tm-active-email').innerText = tm_accounts[tm_active_idx].email;
            }
        }

        async function checkCurrentMail(silent = false) {
            if (tm_accounts.length === 0) return;
            const acc = tm_accounts[tm_active_idx];

            if (!silent) document.getElementById('tm-refresh-btn').innerHTML = '‚åõ';

            try {
                const res = await fetch(`/api/tempmail/check?token=${acc.token}&ts=${Date.now()}`);
                const msgs = await res.json();

                if (!silent) document.getElementById('tm-refresh-btn').innerHTML = 'üîÑ –û–±–Ω–æ–≤–∏—Ç—å';

                const inbox = document.getElementById('tm-inbox-list');
                inbox.innerHTML = '';

                if (msgs.length === 0) {
                    inbox.innerHTML = '<div style="text-align:center;opacity:0.5;padding:30px;">–ü—É—Å—Ç–æ</div>';
                } else {
                    msgs.forEach(msg => {
                        const item = document.createElement('div');
                        item.className = 'mail-item';
                        item.onclick = () => openMail(msg.id);
                        item.innerHTML = `<div><strong>${escapeHtml(msg.from)}</strong></div><div style="font-size:12px;opacity:0.7">${escapeHtml(msg.subject)}</div>`;
                        inbox.appendChild(item);
                    });
                }
            } catch (e) { console.error(e); }
        }

        async function openMail(id) {
            const acc = tm_accounts[tm_active_idx];
            showToast('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–∏—Å—å–º–∞...');
            try {
                const res = await fetch(`/api/tempmail/read?token=${acc.token}&id=${id}`);
                const data = await res.json();

                document.getElementById('tm-read-subject').innerText = data.subject;
                document.getElementById('tm-read-from').innerText = data.from;
                document.getElementById('tm-read-date').innerText = data.date;
                document.getElementById('tm-read-body').innerHTML = data.htmlBody || data.textBody;

                // Code Extraction
                const regex = /(?:code|–∫–æ–¥|pin|pass|verify)[\s\S]{0,50}?(\d{4,8})|(\b\d{5,8}\b)/i;
                const match = (data.subject + ' ' + (data.textBody || '')).match(regex);
                const banner = document.getElementById('tm-code-banner');

                if (match) {
                    document.getElementById('tm-code-value').innerText = match[1] || match[2];
                    banner.style.display = 'flex';
                } else {
                    banner.style.display = 'none';
                }

                document.getElementById('tm-reader').style.display = 'block';
            } catch (e) { showToast('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è', 'error'); }
        }

        function closeReader() { document.getElementById('tm-reader').style.display = 'none'; }
        function deleteCurrentAccount() {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —è—â–∏–∫?')) return;
            tm_accounts.splice(tm_active_idx, 1);
            if (tm_active_idx >= tm_accounts.length) tm_active_idx = 0;
            saveTempMailState();
        }
        function copyActiveEmail() { navigator.clipboard.writeText(tm_accounts[tm_active_idx].email); showToast('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ'); }
        function copyCode() { navigator.clipboard.writeText(document.getElementById('tm-code-value').innerText); showToast('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω'); }

        function toggleHistoryModal() {
            const m = document.getElementById('history-modal');
            m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
            if (m.style.display === 'flex') {
                const l = document.getElementById('history-list');
                l.innerHTML = '';
                tm_history.forEach(h => l.innerHTML += `<div style="padding:10px;border-bottom:1px solid #333">${h.email} <span style="float:right;opacity:0.5">${h.date}</span></div>`);
            }
        }
        function clearHistory() { tm_history = []; saveTempMailState(); toggleHistoryModal(); }

        // --- GENERAL UTILS ---
        function showToast(msg, type = 'info') {
            const t = document.createElement('div');
            t.className = `toast ${type}`;
            t.textContent = msg;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        function escapeHtml(text) { return text ? text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : ''; }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            localStorage.setItem('theme', document.body.classList.contains('light-theme') ? 'light' : 'dark');
            document.getElementById('theme-icon').textContent = document.body.classList.contains('light-theme') ? '‚òÄÔ∏è' : 'üåô';
        }

        // --- OTHER FUNCTIONS ---
        async function loadMonitors() {
            /* Same as before but minified */
            const res = await fetch('/api/monitors');
            const data = await res.json();
            const tbody = document.getElementById('monitors-body');
            tbody.innerHTML = '';
            document.getElementById('monitors-loading').style.display = 'none';
            document.getElementById('monitors-table').style.display = 'table';
            data.forEach(m => {
                const statusClass = m.status === 'online' ? 'status-online' : 'status-offline';
                const statusText = m.status === 'online' ? 'üü¢' : (m.status === 'offline' ? 'üî¥' : '‚ö™');
                const uptime = m.uptime_percentage !== undefined ? `${m.uptime_percentage}%` : '-';
                const ping = m.response_time ? `${m.response_time}ms` : '-';
                const lastCheck = m.last_checked ? new Date(m.last_checked).toLocaleString('ru-RU') : '-';

                tbody.innerHTML += `<tr>
                    <td>‚≠ê</td>
                    <td class="${statusClass}">${statusText} ${m.status}</td>
                    <td>${m.name}</td>
                    <td><a href="${m.url}" target="_blank">${m.url}</a></td>
                    <td>${uptime}</td>
                    <td>${ping}</td>
                    <td>${lastCheck}</td>
                    <td>
                        <button class="btn btn-sm" onclick="viewMonitorLogs('${m.id}', '${m.name}')">üìä –õ–æ–≥–∏</button>
                        <button class="btn btn-sm btn-danger" onclick="removeMonitor('${m.id}')">Del</button>
                    </td>
                </tr>`;
            });
        }
        async function loadAccounts() {
            const res = await fetch('/api/accounts');
            const data = await res.json();
            const tbody = document.getElementById('accounts-body');
            tbody.innerHTML = '';
            document.getElementById('accounts-loading').style.display = 'none';
            document.getElementById('accounts-table').style.display = 'table';
            data.forEach(a => {
                tbody.innerHTML += `<tr><td>‚≠ê</td><td>${a.id}</td><td>${a.preview}</td><td>${a.added_by}</td><td>${a.timestamp}</td><td><button class="btn" onclick="viewAccount(${a.id})">View</button></td></tr>`;
            });
        }
        async function loadStats() {
            const res = await fetch('/api/stats');
            const data = await res.json();
            document.getElementById('total-accounts').innerText = data.total_accounts;
            document.getElementById('total-monitors').innerText = data.total_monitors;
            document.getElementById('monitors-online').innerText = data.monitors_online || 0;
            document.getElementById('monitors-offline').innerText = data.monitors_offline || 0;
        }

        async function loadBotStatus() {
            try {
                const res = await fetch('/api/bot/status');
                const data = await res.json();

                document.getElementById('bot-servers').textContent = data.servers;
                document.getElementById('bot-users').textContent = data.users;
                document.getElementById('bot-commands').textContent = data.commands_today;

                const hours = Math.floor(data.uptime / 3600);
                const minutes = Math.floor((data.uptime % 3600) / 60);
                const seconds = data.uptime % 60;
                const uptimeEl = document.getElementById('bot-uptime');
                if (uptimeEl) {
                    uptimeEl.textContent = `${hours}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                }

                const memEl = document.getElementById('bot-memory');
                const cpuEl = document.getElementById('bot-cpu');
                if (memEl) memEl.textContent = data.memory_used + ' MB';
                if (cpuEl) cpuEl.textContent = data.cpu_percent.toFixed(1) + '%';

                const statusEl = document.getElementById('bot-status-text');
                if (statusEl) {
                    if (data.running) {
                        statusEl.innerHTML = '<span class="status-running">‚óè –†–∞–±–æ—Ç–∞–µ—Ç</span>';
                    } else {
                        statusEl.innerHTML = '<span class="status-stopped">‚óè –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω</span>';
                    }
                }
            } catch (e) {
                console.error('Failed to load bot status:', e);
            }
        }

        async function loadLogs() {
            try {
                const res = await fetch('/api/logs');
                const logs = await res.json();
                const container = document.getElementById('log-container');
                container.innerHTML = '';

                if (logs.length === 0) {
                    container.innerHTML = '<div class="log-entry"><span class="log-time">--:--:--</span><span class="log-level info">[INFO]</span><span>–ù–µ—Ç –ª–æ–≥–æ–≤</span></div>';
                } else {
                    logs.forEach(log => addLogEntry(log));
                }
            } catch (e) {
                console.error('Failed to load logs:', e);
            }
        }

        async function loadArizonaServers() {
            // Placeholder
            document.getElementById('arizona-loading').style.display = 'none';
            document.getElementById('arizona-servers-grid').style.display = 'grid';
            document.getElementById('arizona-servers-grid').innerHTML = '<div style="grid-column:1/-1;text-align:center;">API ARIZONA RP –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>';
        }

        function controlBot(action) {
            fetch(`/api/bot/control/${action}`, { method: 'POST' }).then(r => r.json()).then(d => showToast(d.message, d.success ? 'success' : 'error'));
        }

        async function addMonitor() {
            const url = document.getElementById('monitor-url').value;
            const name = document.getElementById('monitor-name').value;
            await fetch('/api/monitors/add', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ url, name }) });
            loadMonitors(); showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ');
        }
        async function removeMonitor(id) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å?')) return;
            await fetch(`/api/monitors/remove/${id}`, { method: 'DELETE' });
            loadMonitors(); showToast('–£–¥–∞–ª–µ–Ω–æ');
        }
        async function viewAccount(id) {
            const res = await fetch(`/api/accounts/${id}`);
            const d = await res.json();
            document.getElementById('modal-content').innerText = JSON.stringify(d, null, 2);
            document.getElementById('viewModal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('viewModal').style.display = 'none'; }

        // --- MONITOR LOGS FUNCTIONS ---
        let currentMonitorId = null;

        async function viewMonitorLogs(monitorId, monitorName) {
            currentMonitorId = monitorId;
            document.getElementById('monitor-logs-title').textContent = `üìä –õ–æ–≥–∏: ${monitorName}`;
            document.getElementById('monitorLogsModal').style.display = 'flex';

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            try {
                const statsRes = await fetch(`/api/monitors/${monitorId}/stats`);
                const stats = await statsRes.json();

                document.getElementById('monitor-uptime').textContent = stats.uptime_percentage + '%';
                document.getElementById('monitor-checks').textContent = stats.total_checks;
                document.getElementById('monitor-ping').textContent = stats.response_time ? stats.response_time + 'ms' : '-';
                document.getElementById('monitor-status').textContent = stats.status === 'online' ? 'üü¢ Online' : 'üî¥ Offline';

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–≥–∏
                const logsRes = await fetch(`/api/monitors/${monitorId}/logs`);
                const logs = await logsRes.json();

                const logsContainer = document.getElementById('monitor-logs-content');
                if (logs.length === 0) {
                    logsContainer.innerHTML = '<p style="opacity: 0.5; text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</p>';
                } else {
                    logsContainer.innerHTML = logs.map(log => {
                        const typeClass = log.type === 'down' ? 'error' : 'info';
                        const typeIcon = log.type === 'down' ? 'üî¥' : 'üü¢';
                        return `
                            <div class="log-entry">
                                <span class="log-time">${log.timestamp}</span>
                                <span class="log-level ${typeClass}">${typeIcon} ${log.type.toUpperCase()}</span>
                                <span class="log-message">${log.message}</span>
                            </div>
                        `;
                    }).join('');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤:', error);
                showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤', 'error');
            }
        }

        function closeMonitorLogsModal() {
            document.getElementById('monitorLogsModal').style.display = 'none';
            currentMonitorId = null;
        }

        async function clearMonitorLogs() {
            if (!currentMonitorId) return;

            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í—Å–µ –ª–æ–≥–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.')) return;

            try {
                const res = await fetch(`/api/monitors/${currentMonitorId}/clear-logs`, { method: 'POST' });
                const data = await res.json();

                if (data.success) {
                    showToast('–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã', 'success');
                    document.getElementById('monitor-logs-content').innerHTML = '<p style="opacity: 0.5; text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π</p>';
                } else {
                    showToast('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤', 'error');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                showToast('–û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤', 'error');
            }
        }

        // --- INIT ---
        window.addEventListener('DOMContentLoaded', () => {
            const theme = localStorage.getItem('theme');
            if (theme === 'light') {
                document.body.classList.add('light-theme');
                document.getElementById('theme-icon').textContent = '‚òÄÔ∏è';
            }

            // Init Canvas (Particle Network)
            const canvas = document.getElementById('particleCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];
            for (let i = 0; i < 30; i++) particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, vx: (Math.random() - 0.5), vy: (Math.random() - 0.5) });

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = document.body.classList.contains('light-theme') ? 'rgba(0,0,0,0.1)' : 'rgba(255,255,255,0.2)';
                particles.forEach(p => {
                    p.x += p.vx; p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                    ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();

            // Load Initial Data
            loadStats();
            loadBotStatus();
            loadLogs();
            loadMonitors();
            loadAccounts();

            // Periodic updates (fallback if Socket.IO doesn't work)
            setInterval(loadBotStatus, 5000); // Update bot status every 5 seconds

            // Temp Mail Init
            renderAccountsList();
        });
        // --- GOD MODE ---
        function godSetPrefix() {
            const uid = document.getElementById('gm-user-id').value;
            const p = document.getElementById('gm-prefix').value;
            if (!uid || !p) return showToast('–í–≤–µ–¥–∏—Ç–µ ID –∏ –ø—Ä–µ—Ñ–∏–∫—Å', 'error');

            fetch('/api/admin/set_prefix', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ user_id: uid, prefix: p })
            }).then(r => r.json()).then(d => {
                if (d.success) { showToast('–ü—Ä–µ—Ñ–∏–∫—Å –∏–∑–º–µ–Ω–µ–Ω', 'success'); loadGodPrefixes(); }
                else showToast('–û—à–∏–±–∫–∞: ' + (d.error || 'Unknown'), 'error');
            });
        }
        function loadGodPrefixes() {
            fetch('/api/admin/prefixes').then(r => r.json()).then(d => {
                const div = document.getElementById('gm-prefixes-list');
                if (!div || d.error) return;
                if (Object.keys(d).length === 0) { div.innerHTML = '–ù–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤.'; return; }
                let html = '';
                for (let uid in d) html += `<div><b>${uid}</b>: <span style="color:#FFD700">${d[uid]}</span></div>`;
                div.innerHTML = html;
            });
        }

    </script>
</body>

</html>